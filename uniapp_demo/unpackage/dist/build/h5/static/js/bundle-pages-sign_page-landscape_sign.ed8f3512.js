(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bundle-pages-sign_page-landscape_sign"],{"0343":function(t,e,n){"use strict";n.r(e);var i=n("d668"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"057d":function(t,e,n){var i=n("9707");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("3425c37d",i,!0,{sourceMap:!1,shadowMode:!1})},"0c0c":function(t,e,n){"use strict";n.r(e);var i=n("b1219"),a=n("f313");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("ed16");var r=n("f0c5"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"4e17cc4f",null,!1,i["a"],void 0);e["default"]=s.exports},"23ac":function(t,e,n){var i=n("cce0");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("02ba570c",i,!0,{sourceMap:!1,shadowMode:!1})},"2d29":function(t,e,n){var i=n("77de1");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("31c78ec6",i,!0,{sourceMap:!1,shadowMode:!1})},"38cb":function(t,e,n){"use strict";n.r(e);var i=n("acef"),a=n("0343");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("a170");var r=n("f0c5"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"156eb024",null,!1,i["a"],void 0);e["default"]=s.exports},"77de1":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-448c37db]{width:100%;height:100%}.landscape-sign[data-v-448c37db]{display:flex;flex-direction:column;width:100%;height:100%}.header-cont[data-v-448c37db]{width:100%;height:%?110?%;line-height:%?100?%;text-align:center;background:red}.list-cont[data-v-448c37db]{flex:1;position:relative}.list-cont .scrool-more[data-v-448c37db]{position:absolute;left:0;right:0;top:0;bottom:0}.list-cont .list[data-v-448c37db]{height:%?80?%;line-height:%?80?%;text-align:center;background:#e0e0e0}.imgs[data-v-448c37db]{display:flex;justify-content:center;align-items:center;background-color:#d6d6d6;margin-top:%?20?%;width:95%;height:%?400?%;border:%?1?% solid #ddd;border-radius:%?10?%}.imgs uni-text[data-v-448c37db]{text-align:center}.u-block__title[data-v-448c37db]{font-weight:700}.option-required[data-v-448c37db]{color:#ff3b00}.space-fill[data-v-448c37db]{height:%?10?%;width:100%}.question-text[data-v-448c37db]{padding:%?20?%}.question-radio[data-v-448c37db]{padding:%?20?%}.question-check[data-v-448c37db]{padding:%?20?%}.question-sign[data-v-448c37db]{padding:%?20?%}.sign-btn[data-v-448c37db]{background-color:#d6d6d6}.radio-bottom-input[data-v-448c37db]{margin-top:%?20?%}.footer[data-v-448c37db]{color:#fff;line-height:%?100?%;flex:0 0 %?100?%\n  /* 不放大不缩小固定100rpx */}.footer .submit-btn[data-v-448c37db]{background-image:linear-gradient(90deg,#39c9bc,#6de8cc);color:#fff}",""]),t.exports=e},"882a":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={navBar:n("38cb").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"landscape-sign"},[n("nav-bar",{attrs:{title:"横屏签字",backgroundColor:"linear-gradient(to right, #39C9BC,#6DE8CC)"},on:{goBack:function(e){arguments[0]=e=t.$handleEvent(e),t.naviLeftClick.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"header-cont"},[t._v("头部")]),n("v-uni-view",{staticClass:"list-cont"},[n("v-uni-scroll-view",{staticClass:"scrool-more",staticStyle:{height:"100%"},attrs:{"scroll-y":"true","scroll-with-animation":"true"}},[n("v-uni-view",{staticClass:"question-sign"},[n("v-uni-view",{staticClass:"logo_text"},[n("v-uni-text",{staticClass:"option-required"},[t._v("*")]),n("v-uni-text",{staticClass:"u-block__title"},[t._v("护理人员签名确认")])],1),n("v-uni-view",{staticStyle:{border:"1rpx dashed #555555"}},[n("Signature",{ref:"sign",model:{value:t.signValue,callback:function(e){t.signValue=e},expression:"signValue"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"footer"},[n("v-uni-button",{staticClass:"submit-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitAppraiseFun.apply(void 0,arguments)}}},[t._v("提交评估")])],1)],1)},o=[]},9707:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/*uni.scss*/\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.signature-wrap[data-v-4e17cc4f]{height:100%;width:100%}.signature-wrap .img-wrap[data-v-4e17cc4f]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#d6d6d6;width:100%;height:%?200?%;border-radius:%?10?%}.signature-wrap .img-wrap .tips[data-v-4e17cc4f]{text-align:center}.signature-contain[data-v-4e17cc4f]{z-index:9000;position:fixed;left:0;top:0;width:100%\n  /* 签字 标题 */}.signature-contain .signature-main[data-v-4e17cc4f]{background:#fff;flex-direction:row-reverse;display:flex;align-items:stretch;height:101%;overflow:scroll}.signature-contain .signature-title[data-v-4e17cc4f]{font-weight:700;font-size:18px;display:flex;padding:0 %?20?%;flex-direction:column;justify-content:center;height:100vh;color:#000}.signature-contain .signature-title uni-text[data-v-4e17cc4f]{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.signature-contain .signature[data-v-4e17cc4f]{border:1px dotted #000;border-bottom:1px dotted #000;background:#fff;margin:10px 0;width:90vw;height:90vh;align-self:center}.signature-contain .signature-btns[data-v-4e17cc4f]{display:flex;padding:2px;flex-direction:column}.signature-contain .signature-btns .btn[data-v-4e17cc4f]{flex-grow:1;flex-shrink:0;padding:%?20?%;font-size:20px;margin:0;text-align:center;text-decoration:none;height:30vh;display:flex;align-content:center;justify-content:center;flex-direction:column}.signature-contain .signature-btns .btn uni-text[data-v-4e17cc4f]{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.signature-contain .signature-btns .btn + .btn[data-v-4e17cc4f]{border-top:1px solid #eee}.signature-contain .signature-btns .btn.btn-clear[data-v-4e17cc4f]{color:#4cd964}.signature-contain .signature-btns .btn.btn-cancel[data-v-4e17cc4f]{color:#f0ad4e}.signature-contain .signature-btns .btn.btn-ok[data-v-4e17cc4f]{color:#007aff}',""]),t.exports=e},a170:function(t,e,n){"use strict";var i=n("23ac"),a=n.n(i);a.a},acef:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"nav-bar",style:"height: calc("+t.statusBarHeight+"px + "+t.topHeight+"rpx)"},[n("v-uni-view",{staticClass:"topZw"},[n("v-uni-view",{staticClass:"comStatus",style:"height: "+t.statusBarHeight+"px"}),n("v-uni-view",{staticClass:"topMain",style:"height: "+t.topHeight+"rpx"})],1),n("v-uni-view",{staticClass:"top",style:t.topStyle},[n("v-uni-view",{staticClass:"comStatus",style:"height: "+t.statusBarHeight+"px"}),n("v-uni-view",{staticClass:"topMain",style:"height: "+t.topHeight+"rpx"},[t.back?n("v-uni-view",{staticClass:"back",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"img",attrs:{src:"/static/images/ico_back.png"}})],1):t._e(),t._t("default"),n("v-uni-text",{staticClass:"title",style:{color:t.titleColor}},[t._v(t._s(t.title))])],2)],1)],1)},a=[]},b121:function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("c7eb")),o=i(n("1da1")),r=(n("2a15"),i(n("0c0c"))),s={components:{Signature:r.default},data:function(){return{formData:{},questionList:[],signValue:""}},onBackPress:function(t){console.log("导航栏返回 拦截event",t)},onLoad:function(){},methods:{naviLeftClick:function(){console.log("导航栏返回 拦截");var t=getCurrentPages();console.log("导航栏pages",t),uni.navigateBack()},submitAppraiseFun:function(){console.log("提交评估单 --- ",this.signValue)},startSign:function(){var t=this;return(0,o.default)((0,a.default)().mark((function e(){var n;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.sign.getSyncSignature();case 2:n=e.sent,console.log("组件版本",t.$refs.sign.VERSION),console.log("签名数据",n);case 5:case"end":return e.stop()}}),e)})))()}}};e.default=s},b1219:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"signature-wrap"},[n("v-uni-view",{staticClass:"img-wrap",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchSignature()},click:function(e){arguments[0]=e=t.$handleEvent(e),t.showSignature()}}},[""==t.prevView?n("v-uni-text",{staticClass:"tips"},[t._v("点击此处签名确认")]):t._e(),n("v-uni-image",{attrs:{src:t.absPrevView,mode:"scaleToFill"}})],1),t.disabled?t._e():n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"signature-contain"},[n("v-uni-view",{staticClass:"signature-main",staticStyle:{"z-index":"3000"}},[n("v-uni-view",{staticClass:"signature-title"},t._l(t.titles,(function(e,i){return n("v-uni-text",{key:i},[t._v(t._s(e))])})),1),n("v-uni-canvas",{staticClass:"signature",class:t.cid,attrs:{"disable-scroll":"true","canvas-id":"cvs"},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchstart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchmove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchend.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"signature-btns"},[n("v-uni-view",{staticClass:"btn btn-cancel cu-btn bg-main margin-tb-sm text-white",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelSignature()}}},[n("v-uni-text",[t._v("取")]),n("v-uni-text",[t._v("消")])],1),n("v-uni-view",{staticClass:"btn btn-clear cu-btn bg-main margin-tb-sm text-white",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearSignature()}}},[n("v-uni-text",[t._v("清")]),n("v-uni-text",[t._v("空")])],1),n("v-uni-view",{staticClass:"btn btn-ok cu-btn bg-main margin-tb-sm text-white",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveSign()}}},[n("v-uni-text",[t._v("确")]),n("v-uni-text",[t._v("定")])],1)],1)],1)],1)],1)},a=[]},c0b6:function(t,e,n){"use strict";var i=n("2d29"),a=n.n(i);a.a},cbca:function(t,e,n){"use strict";n.r(e);var i=n("b121"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},cce0:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/*uni.scss*/\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.nav-bar[data-v-156eb024]{width:%?750?%}.nav-bar .topZw[data-v-156eb024]{width:%?750?%}.nav-bar .topZw .comStatus[data-v-156eb024]{width:%?750?%;position:relative}.nav-bar .topZw .topMain[data-v-156eb024]{width:%?750?%}.nav-bar .top[data-v-156eb024]{width:%?750?%;position:fixed;top:0;left:0;z-index:1000}.nav-bar .top .comStatus[data-v-156eb024]{width:%?750?%;position:relative}.nav-bar .top .topMain[data-v-156eb024]{width:%?750?%;position:relative}.nav-bar .top .topMain .back[data-v-156eb024]{width:%?60?%;height:%?60?%;box-sizing:border-box;padding:%?10?%;position:absolute;top:%?20?%;left:%?20?%;z-index:2}.nav-bar .top .topMain .back .img[data-v-156eb024]{width:%?45?%;height:%?45?%;display:block}.nav-bar .top .topMain .title[data-v-156eb024]{flex:1;height:%?58?%;line-height:%?58?%;text-align:center;position:absolute;top:%?20?%;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);z-index:1;color:#fff;font-size:%?30?%}.nav-bar .yuanhu[data-v-156eb024]{width:%?750?%;height:%?30?%;border-radius:%?30?% %?30?% 0 0;background-color:#fff;opacity:.1;position:absolute;bottom:0;left:0;z-index:1001}',""]),t.exports=e},d668:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a9e3");var i={data:function(){return{statusBarHeight:0,topStyle:{}}},props:{title:String,titleColor:{type:String,default:"#FFFFFF"},back:{type:Boolean,default:!0},backgroundImageShow:{type:Boolean,default:!1},backgroundColor:{type:String,default:"#004799"},backgroundImage:String,topHeight:{type:Number,default:108}},mounted:function(){this.init()},methods:{goBack:function(){this.$emit("goBack"),this.back&&uni.navigateBack()},init:function(){this.backgroundImageShow?this.topStyle={"background-image":"url("+this.backgroundImage+")","background-repeat":"no-repeat",backgroundSize:"100% 100%"}:this.topStyle={background:this.backgroundColor},this.statusBarHeight=this.getSysInfo().statusBarHeight},getSysInfo:function(){return uni.getSystemInfoSync()}}};e.default=i},ea09:function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.base64ToPath=function(t){return new Promise((function(e,n){if("object"===("undefined"===typeof window?"undefined":(0,a.default)(window))&&"document"in window){t=t.split(",");var i=t[0].match(/:(.*?);/)[1],s=atob(t[1]),c=s.length,u=new Uint8Array(c);while(c--)u[c]=s.charCodeAt(c);return e((window.URL||window.webkitURL).createObjectURL(new Blob([u],{type:i})))}var d=t.split(",")[0].match(/data\:\S+\/(\S+);/);d?d=d[1]:n(new Error("base64 error"));var l=function(){return Date.now()+String(r++)}()+"."+d;if("object"!==("undefined"===typeof plus?"undefined":(0,a.default)(plus)))if("object"===("undefined"===typeof wx?"undefined":(0,a.default)(wx))&&wx.canIUse("getFileSystemManager")){f=wx.env.USER_DATA_PATH+"/"+l;wx.getFileSystemManager().writeFile({filePath:f,data:o(t),encoding:"base64",success:function(){e(f)},fail:function(t){n(t)}})}else n(new Error("not support"));else{var f="_doc/uniapp_temp/"+l;if(!function(t,e){for(var n=t.split("."),i=e.split("."),a=!1,o=0;o<i.length;o++){var r=n[o]-i[o];if(0!==r){a=r>0;break}}return a}("Android"===plus.os.name?"1.9.9.80627":"1.9.9.80472",plus.runtime.innerVersion))return void plus.io.resolveLocalFileSystemURL("_doc",(function(i){i.getDirectory("uniapp_temp",{create:!0,exclusive:!1},(function(i){i.getFile(l,{create:!0,exclusive:!1},(function(i){i.createWriter((function(i){i.onwrite=function(){e(f)},i.onerror=n,i.seek(0),i.writeAsBinary(o(t))}),n)}),n)}),n)}),n);var h=new plus.nativeObj.Bitmap(l);h.loadBase64Data(t,(function(){h.save(f,{},(function(){h.clear(),e(f)}),(function(t){h.clear(),n(t)}))}),(function(t){h.clear(),n(t)}))}}))},e.pathToBase64=function(t){return new Promise((function(e,n){if("object"===("undefined"===typeof window?"undefined":(0,a.default)(window))&&"document"in window){if("function"===typeof FileReader){var i=new XMLHttpRequest;return i.open("GET",t,!0),i.responseType="blob",i.onload=function(){if(200===this.status){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=n,t.readAsDataURL(this.response)}},i.onerror=n,void i.send()}var o=document.createElement("canvas"),r=o.getContext("2d"),s=new Image;return s.onload=function(){o.width=s.width,o.height=s.height,r.drawImage(s,0,0),e(o.toDataURL()),o.height=o.width=0},s.onerror=n,void(s.src=t)}"object"!==("undefined"===typeof plus?"undefined":(0,a.default)(plus))?"object"===("undefined"===typeof wx?"undefined":(0,a.default)(wx))&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:t,encoding:"base64",success:function(t){e("data:image/png;base64,"+t.data)},fail:function(t){n(t)}}):n(new Error("not support")):plus.io.resolveLocalFileSystemURL(function(t){if(0===t.indexOf("_www")||0===t.indexOf("_doc")||0===t.indexOf("_documents")||0===t.indexOf("_downloads"))return t;if(0===t.indexOf("file://"))return t;if(0===t.indexOf("/storage/emulated/0/"))return t;if(0===t.indexOf("/")){var e=plus.io.convertAbsoluteFileSystem(t);if(e!==t)return e;t=t.substr(1)}return"_www/"+t}(t),(function(t){t.file((function(t){var i=new plus.io.FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(t){n(t)},i.readAsDataURL(t)}),(function(t){n(t)}))}),(function(t){n(t)}))}))};var a=i(n("53ca"));function o(t){var e=t.split(",");return e[e.length-1]}n("c975"),n("d3b7"),n("d9e2"),n("d401"),n("ac1f"),n("466d"),n("81b2"),n("0eb6"),n("b7ef"),n("8bd4"),n("ace4"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("986a"),n("1d02"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("b39a"),n("72f7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861");var r=0},ed16:function(t,e,n){"use strict";var i=n("057d"),a=n.n(i);a.a},f313:function(t,e,n){"use strict";n.r(e);var i=n("fca1"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},f935:function(t,e,n){"use strict";n.r(e);var i=n("882a"),a=n("cbca");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("c0b6");var r=n("f0c5"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"448c37db",null,!1,i["a"],void 0);e["default"]=s.exports},fca1:function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("c7eb")),o=i(n("1da1"));n("ac1f"),n("5319"),n("d3b7"),n("14d9"),n("d81d"),n("99af"),n("a9e3");n("ea09");var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=function(t){var e,n,i,a,o,s,c,u="",d=0;t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e}(t);while(d<t.length)e=t.charCodeAt(d++),n=t.charCodeAt(d++),i=t.charCodeAt(d++),a=e>>2,o=(3&e)<<4|n>>4,s=(15&n)<<2|i>>6,c=63&i,isNaN(n)?s=c=64:isNaN(i)&&(c=64),u=u+r.charAt(a)+r.charAt(o)+r.charAt(s)+r.charAt(c);return u},c={cxt:null,data:function(){return{VERSION:"1.0.0",cid:"cvs",show:!1,ctrl:null,listeners:[],prevView:"",draws:[],lines:[],line:null}},props:{value:{default:""},title:{type:String,default:"请签字"},disabled:{type:Boolean,default:!1}},watch:{value:function(){this.prevView=this.value}},computed:{titles:function(){return this.title.split("")},absPrevView:function(){var t=this.prevView;return t}},mounted:function(){this.prevView=this.value,console.log("dx",this.prevView)},methods:{onOK:function(){var t=this.ctrl.getValue();this.$emit("input",t),this.prevView=t,this.hideSignature();var e=this.listeners.shift();e&&e(t)},saveSign:function(){var t=this,e=this;this.hasDh?(uni.showLoading({title:"生成中...",mask:!0}),setTimeout((function(){uni.canvasToTempFilePath({canvasId:t.cid,success:function(t){console.log("签名路径filePath",t),e.$emit("input",t.tempFilePath),uni.hideLoading(),e.hasDh=!1,e.show=!1},fail:function(t){console.log(t),uni.hideLoading()}},t)}),100)):uni.showToast({title:"请先签字",icon:"none"})},touchSignature:function(){var t=this.prevView;t&&t.length||this.showSignature()},showSignature:function(){this.disabled||(this.ctrl?this.show||(this.clearSignature(),this.show=!0):this.initCtrl())},getSyncSignature:function(){var t=this;return(0,o.default)((0,a.default)().mark((function e(){return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showSignature(),e.next=3,new Promise(function(){var e=(0,o.default)((0,a.default)().mark((function e(n,i){return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.listeners.push((function(t){n(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},cancelSignature:function(){this.listeners.map((function(t){t(null)})),this.hideSignature()},hideSignature:function(){this.ctrl&&this.ctrl.clear(),this.show=!1},clearSignature:function(){this.ctrl&&this.ctrl.clear()},initCtrl:function(){var t=this;return(0,o.default)((0,a.default)().mark((function e(){var n;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.show=!0,n=uni.createCanvasContext(t.cid,t),t.cxt=n,t.ctrl={width:0,height:0,clear:function(){t.lines=[];var e=uni.createSelectorQuery().in(t).select("."+t.cid);e.boundingClientRect((function(e){e&&(n.clearRect(0,0,e.width,e.height),e.width&&e.height&&(t.ctrl.width=e.width,t.ctrl.height=e.height))})).exec(),t.redraw()},getValue:function(){if(!t.lines.length)return"";var e=t._get_svg(),n=s(e),i="data:image/svg+xml;base64,"+n;return i}},t.$nextTick((function(){this.ctrl.clear()}));case 5:case"end":return e.stop()}}),e)})))()},_get_svg:function(){var t=[],e=this.ctrl.width,n=this.ctrl.height,i=90!=Math.abs(-90)?e:n,a=90==Math.abs(-90)?e:n,o=e/2,r=n/2,s=Math.PI,c=Math.cos(-90*s/180),u=Math.sin(-90*s/180),d=(i-e)/2,l=(a-n)/2,f=function(t){var e=(t.x-o)*c-(t.y-r)*u+o,n=(t.x-o)*u+(t.y-r)*c+r;return{x:e+d,y:n+l}};this.lines.map((function(e){if(!(e.points.length<2)){var n=f(e.start),i=["M ".concat(n.x," ").concat(Number(n.y))];e.points.map((function(t){var e=f(t);i.push("L ".concat(e.x," ").concat(Number(e.y)))})),t.push('<path stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="rgb(0,0,0)" fill="none" d="'.concat(i.join(" "),'"/>'))}}));var h='<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'.concat(i,'" height="').concat(a,'">').concat(t.join("\n"),"</svg>");return h},_get_svg_raw:function(){var t=[];this.lines.map((function(e){if(!(e.points.length<2)){var n=["M ".concat(e.start.x," ").concat(Number(e.start.y))];e.points.map((function(t){n.push("L ".concat(t.x," ").concat(Number(t.y)))})),t.push('<path stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="rgb(0,0,0)" fill="none" d="'.concat(n.join(" "),'"/>'))}}));var e=this.ctrl.width,n=this.ctrl.height,i='<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'.concat(e,'" height="').concat(n,'" transform="rotate(-90)">').concat(t.join("\n"),"</svg>");return i},_get_point:function(t){return{x:t.changedTouches[0].x.toFixed(1),y:t.changedTouches[0].y.toFixed(1)}},touchstart:function(t){this.hasDh=!0;var e=this._get_point(t);this.line={start:e,points:[e]},this.lines.push(this.line)},touchmove:function(t){var e=this,n=this._get_point(t);this.line.points.push(n),this.tm||(this.tm=setTimeout((function(){e.redraw(),e.tm=0}),10))},touchend:function(t){var e=this._get_point(t);this.line.points.push(e),this.line.end=e,this.redraw()},redraw:function(){var t=this.cxt;t.setStrokeStyle("#000"),t.setLineWidth(3);this.lines.map((function(e){t.beginPath(),e.points.length<2||(t.moveTo(e.start.x,e.start.y),e.points.map((function(e){t.lineTo(e.x,e.y)})),t.stroke())})),t.draw()},canvasIdErrorCallback:function(t){console.error(t.detail.errMsg)}}};e.default=c}}]);