(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/hic-video-player/components/hic-live-player/hic-live-player"],{"2bcf":function(e,t,n){"use strict";var i=n("6ebf"),o=n.n(i);o.a},"378c":function(e,t,n){"use strict";n.r(t);var i=n("ce13"),o=n("7d05");for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("2bcf");var c=n("f0c5"),l=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"1b5eaca0",null,!1,i["a"],void 0);t["default"]=l.exports},"6ebf":function(e,t,n){},"7d05":function(e,t,n){"use strict";n.r(t);var i=n("c180"),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},c180:function(e,t,n){"use strict";(function(e){var i=n("7037");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=r?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(o,l,s):o[l]=e[l]}o.default=e,n&&n.set(e,o);return o}(n("9b74")),r=n("352d");function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var l={name:"HicLivePlayer",components:{HicControls:function(){n.e("uni_modules/hic-video-player/components/hic-controls/hic-controls").then(function(){return resolve(n("f88c"))}.bind(null,n)).catch(n.oe)}},emits:["changeUrl","error"],props:{src:{type:String,default:""},mode:{type:String,default:"live",validator:function(e){return-1!==["live","RTC"].indexOf(e)}},autoplay:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},orientation:{type:String,default:"vertical",validator:function(e){return-1!==["vertical","horizontal"].indexOf(e)}},controls:{type:Boolean,default:!0},title:{type:String,default:""},controlsToggleTitle:{type:Boolean,default:!1},upperRightText:{type:String,default:""},definition:{type:Array,default:function(){return[]}},defaultDefinition:{type:String,default:"sd"},autoFullScreen:{type:Boolean,default:!1},showPlayBtn:{type:Boolean,default:!1},showFullScreenBtn:{type:Boolean,default:!1},style_:{type:String,default:""},custom:{type:Boolean,default:!1},customName:{type:String,default:""},onlyShowCustomInFullscreen:{type:Boolean,default:!1}},data:function(){return{videoUrl:"",curDefinition:this.defaultDefinition,videoLoadText:"正在加载请稍等",coverViewVis:!1,ctx:null,playing:!1,fullscreen:!1,codeMap:{2001:"已经连接服务器",2002:"已经连接服务器,开始拉流",2003:"网络接收到首个视频数据包(IDR)",2004:"视频播放开始",2005:"视频播放进度",2006:"视频播放结束",2007:"视频加载中",2008:"解码器启动",2009:"视频分辨率改变","-2301":"网络断连，且经多次重连抢救无效，更多重试请自行重启播放","-2302":"获取加速拉流地址失败","-2304":"H265硬件解码器无法启动",2101:"当前视频帧解码失败",2102:"当前音频帧解码失败",2103:"网络断连, 已启动自动重连",2104:"服务端网络不稳",2105:"当前视频播放出现卡顿",2106:"硬解启动失败，采用软解",2107:"当前视频帧可能丢帧",2108:"当前流硬解第一个I帧失败，SDK自动切软解",3001:"RTMP -DNS解析失败",3002:"RTMP服务器连接失败",3003:"RTMP服务器握手失败",3005:"RTMP 读/写失败"}}},watch:{src:{handler:function(e){this.init()}},definition:{handler:function(e){this.init()}}},computed:{hasDefinition:function(){return Array.isArray(this.definition)&&this.definition.length}},mounted:function(){this.init(),this.showControls(),this.autoFullScreen&&(0,r.onDirectionChange)(this.directionChange)},beforeDestroy:function(){this.autoFullScreen&&(0,r.offDirectionChange)(this.directionChange)},methods:{init:function(){var e=this;if(this.hasDefinition){this.curDefinition||(this.curDefinition=this.defaultDefinition||this.definition[0].key);var t=this.definition.findIndex((function(t){return t.key==e.curDefinition}));-1==t&&(t=0),this.videoUrl=this.definition[t].src}else this.videoUrl=this.src;this.$emit("changeUrl",this.videoUrl),this.$nextTick((function(){e.bindPlay()}))},changeDefinition:function(e){this.curDefinition=e,this.init(),this.$emit("changeDefinition",e)},createContext:function(){this.ctx||(this.ctx=e.createLivePlayerContext("hic-live-player",this))},statechange:function(e){var t=e.detail,n=e.detail.code;switch(console.log("live-player code:",n,this.codeMap[n],t),n){case 2008:case 2001:case 2103:case 2004:this.videoLoadText="缓存中请稍等";break;case 2003:this.videoLoadText="";break;case-2301:case-2304:this.videoLoadText="视频播放出错",this.$emit("error",e);break;case 2105:this.videoLoadText=this.codeMap[n]||"",this.clearLoadText();break;default:this.videoLoadText=this.codeMap[n]||""}},clearLoadText:o.debounce((function(){this.videoLoadText=""}),2e3),fullscreenchange:function(e){console.log("live-player fullscreenchange:",e.detail),this.fullscreen=e.detail.fullScreen},error:function(e){console.error("live-player error:",e.detail.errMsg),this.$emit("error",e)},bindPlay:function(){var e=this;return new Promise((function(t,n){e.createContext(),e.ctx.play({success:function(n){console.log("play success",n),e.playing=!0,t()},fail:function(e){console.log("play fail",e),n()}})}))},bindStop:function(){var e=this;return new Promise((function(t,n){e.createContext(),e.ctx.stop({success:function(n){console.log("stop success",n),e.playing=!1,t()},fail:function(e){console.log("stop fail",e),n()}})}))},requestFullScreen:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90;return new Promise((function(n,i){"number"!==typeof t&&(t=90),e.createContext(),e.ctx.requestFullScreen({direction:t,success:function(e){console.log("fullscreen success",e),n()},fail:function(e){console.log("fullscreen fail",e),i()}})}))},exitFullScreen:function(){var e=this;return new Promise((function(t,n){e.createContext(),e.ctx.exitFullScreen({success:function(e){console.log("exitFullscreen success",e),t()},fail:function(e){console.log("exitFullscreen fail",e),n()}})}))},showControls:function(){this.controls&&(this.coverViewVis||this.controlstoggle(!0),this.hideControls())},hideControls:o.debounce((function(){if(this.coverViewVis){if(!this.playing)return;this.controlstoggle(!1)}}),5e3),controlstoggle:function(e){this.coverViewVis=Boolean(e),this.$refs["hicControls"].controlstoggle(e)},pause:function(){this.bindStop()},directionChange:function(e){console.log("directionChange",e),this.createContext(),0===e?this.exitFullScreen():this.requestFullScreen(e)}}};t.default=l}).call(this,n("543d")["default"])},ce13:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var i={hicControls:function(){return n.e("uni_modules/hic-video-player/components/hic-controls/hic-controls").then(n.bind(null,"f88c"))}},o=function(){var e=this.$createElement;this._self._c},r=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/hic-video-player/components/hic-live-player/hic-live-player-create-component',
    {
        'uni_modules/hic-video-player/components/hic-live-player/hic-live-player-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("378c"))
        })
    },
    [['uni_modules/hic-video-player/components/hic-live-player/hic-live-player-create-component']]
]);
