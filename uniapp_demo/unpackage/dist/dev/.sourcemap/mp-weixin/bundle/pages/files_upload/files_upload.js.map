{"version":3,"sources":["uni-app:///main.js","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/bundle/pages/files_upload/files_upload.vue?5b3b","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/bundle/pages/files_upload/files_upload.vue?0d6e","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/bundle/pages/files_upload/files_upload.vue?5430","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/bundle/pages/files_upload/files_upload.vue?509e","uni-app:///bundle/pages/files_upload/files_upload.vue","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/bundle/pages/files_upload/files_upload.vue?a131"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","navBar","uInput","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","g0","_self","_c","maxSelect","recordPhotoes","length","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","zyTag","catSignature","appraisePerson","itemSn","order_id","step_id","mapInstance","maxCount","imageUrl","attach","isAuth","nurserLocation","latitude","longitude","address","isShowSign","signImage","wasteSortList","checked","name","wasteCountValue","saveBaseDataList","onLoad","methods","inputData","submitNursingRecordFun","uni","title","icon","uploadImagesFun","url","filePath","formData","token","cate","success","count","fail","uploadSignInfoFun","uploadRes","uid","addImage","complete","that","tempFiles","src","quality","photoList","imageMenu","itemList","newPhotoList","content","viewImage","urls","current","doss","closeSign","saveSign","multiHandle","props","type","default"],"mappings":"iKAAA,MAGA,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,6CACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,OAAQ,WACN,OAAO,0DAITC,OAAQ,WACN,OAAO,oHAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,UAAYP,EAAIQ,cAAcC,SAA4B,GAAlBT,EAAIO,WACzDP,EAAIU,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLV,GAAIA,MAKRW,GAAmB,EACnBC,EAAkB,GACtBjB,EAAOkB,eAAgB,G,iCC/CvB,yHAAu4B,eAAG,G,2HCsE14B,aACA,WACA,mQAGA,UACA,CACA1B,YACA2B,QACAC,gBAEAR,gBACA,OAEAS,kBACAC,UACAC,YACAC,WAEAC,iBAEAhB,iBAEAiB,WACAC,YACAC,UAEAC,UAEAC,gBACAC,YACAC,aACAC,YAGAC,cACAC,aAEAC,eACA,CACAC,WACAC,cAEA,CACAD,WACAC,cAEA,CACAD,WACAC,cAEA,CACAD,WACAC,cAEA,CACAD,WACAC,cAEA,CACAD,WACAC,YAIAC,mBAEAC,sBAGAC,mBACA,+DAEA,qDAIA,gBAAAlB,aACAzB,+BACA,cACA,gBAEA,sCACA,sBACAA,kDACA,uBACAA,4CAIA4C,SACAC,wBAEA7C,mCAEA,wBAIA8C,kCACA,4BASA,iCAQA,QAIA,6BAXAC,aACAC,cACAC,mBAXAF,aACAC,kBACAC,eAsBAC,4BAAA,WAEAlD,4CAEA,yCAEA+C,cACAI,yCACAC,+BACAZ,YACAa,UAAAC,QAAAC,aACAC,oBACAxD,+BACA,yBAEA,GADAA,6BACA,WAGA,GAFA,4BACAyD,IACA,2BAEA,oCACA,4BAEA,sDAGA,0BAGAzD,eACA+C,gBACAA,aACAE,YACAD,kBAKAU,iBACA1D,+BAMA2D,6BACA,oBACAZ,aACAC,YACAC,cAGA,OACAK,6BACAC,aAEAR,cACAI,yCACAC,wBACAZ,YACAa,WACAG,oBACAxD,yBAGA4D,EADAT,IACAS,EADAC,KAIAH,iBACA1D,+BAMA8D,oBAEA,WACA,yCACAf,aACAC,iBACAC,YACAc,qBACAC,kDAMAjB,eACAU,QACAD,oBACA,kBACA,KACAS,yBAEAlB,iBACAmB,WACAC,WACAX,oBACAxD,yBACA,yCACAoE,2BAEA,iBACA,kFACAA,gCAIA,qCACAA,kCAQAV,iBACA1D,6BAOAqE,sBAEA,WACAtB,mBACAuB,uCACAd,oBAGA,GAFAxD,wBAEA,cAEA,QACA,sBACA,OACAoE,YACAA,SAEA,IADA,SACA,mBACAG,aAEAP,4BACAA,oDAGAjB,aACAC,aACAC,YACAc,qBACAC,uDAMA,iBAEA,+BACA,kBACA,OACAI,YACAA,SAEA,IADA,KACA,mBACAG,aAEAP,4BACAA,oDAGAjB,aACAC,aACAC,YACAc,qBACAC,uDAMA,cACAjB,eACAU,QACAD,oBAIA,IAHA,sBAEA,KACA,mBACA,KACAe,aAGAA,2BAIAP,4BAIAA,gDAEAN,iBACAM,kDAKA,eACAjB,aACAC,WACAwB,qBACAhB,oBACA,cAIA,IAHA,sBAEA,KACA,mBACA,MACAe,aAIAP,4BAEAA,oDAGAA,gDAGAN,iBACAM,sDAQAS,sBACA1B,gBACA2B,iBACAC,aAMAC,gBACA,oBAEAC,qBACA,oBAEAC,qBACA,mBACA,4CACA9E,8CAGA+E,0BACA,+DAKAC,OACAC,MACAA,YACAC,iBAGAxE,WACAuE,YACAC,eAGA,c,6DC9dA,yHAA0mD,eAAG,G","file":"bundle/pages/files_upload/files_upload.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './bundle/pages/files_upload/files_upload.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./files_upload.vue?vue&type=template&id=9242c076&\"\nvar renderjs\nimport script from \"./files_upload.vue?vue&type=script&lang=js&\"\nexport * from \"./files_upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./files_upload.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"bundle/pages/files_upload/files_upload.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./files_upload.vue?vue&type=template&id=9242c076&\"","var components\ntry {\n  components = {\n    navBar: function () {\n      return import(\n        /* webpackChunkName: \"components/nav-bar/nav-bar\" */ \"@/components/nav-bar/nav-bar.vue\"\n      )\n    },\n    uInput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-input/u-input\" */ \"@/uni_modules/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.maxSelect > _vm.recordPhotoes.length || _vm.maxSelect == -1\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./files_upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./files_upload.vue?vue&type=script&lang=js&\"","<!-- 执行中  订单详情  status = 8 -->\n\n<template>\n\t<view class=\"files-upload\">\n\t\t<nav-bar title=\"执行中\" backgroundColor=\"linear-gradient(to right, #39C9BC,#6DE8CC)\"></nav-bar>\n\t\t\n\t\t<!-- 医废登记 -->\n        <view class=\"list-cont\">\n\t\t\t<scroll-view class=\"scrool-more\" style=\"height: 100%\" scroll-y=\"true\" scroll-with-animation=\"true\">\n\t\t\t\t<!-- 医废登记 -->\n\t\t\t\t<view class=\"record-title\">\n\t\t\t\t\t<text class=\"option-required\"> * </text> \n\t\t\t\t\t<text class=\"u-block__title\">医废登记</text>\n\t\t\t\t</view>\n\t\t\t\t<!-- 医疗废物分类 -->\n\t\t\t\t<view class=\"record-title\"> \n\t\t\t\t\t<text class=\"option-required\"> * </text>\n\t\t\t\t\t<text class=\"u-block__title\">医疗废物分类</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"tag_container\">\n\t\t\t\t\t<zyTag v-for=\"(wsItem,wsIndex) in wasteSortList\" :key=\"wsIndex\" :text=\"wsItem.name\"\n\t\t\t\t\t\tv-bind:theme=\"wsItem.checked===true?'dark':'plain'\" @click=\"multiHandle(wsItem,wsIndex)\" />\n\t\t\t\t</view>\n\t\t\t\t<!-- 医疗废物重量或数量 -->\n\t\t\t\t<view class=\"record-title\">\n\t\t\t\t\t<text class=\"u-block__title\">医疗废物重量或数量</text>\n\t\t\t\t\t<u-input class=\"downCheck\" border=\"surround\"\n\t\t\t\t\t\tplaceholder=\"请输入医疗废物或重量\"\n\t\t\t\t\t  @input=\"inputData($event, wasteCountValue)\"></u-input>\n\t\t\t\t\t\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 拍照签到 -->\n\t\t\t\t<view class=\"photo-sign\" >\n\t\t\t\t\t<view class=\"project-title\">\n\t\t\t\t\t\t<text class=\"option-required\"> * </text> \n\t\t\t\t\t\t<text class=\"u-block__title\"> 护理记录拍照</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t</view>\n\t\t\t\t<view class=\"columnDisplay borderGrey\">\n\t\t\t\t\t<view class=\"imageContainer\">\n\t\t\t\t\t\t<view v-for=\"(im,i) in recordPhotoes\" :key=\"i\" @longtap=\"imageMenu(i)\" @tap=\"viewImage(i)\">\n\t\t\t\t\t\t\t<image :src=\"im\" class=\"imageBlock\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-if=\"maxSelect > recordPhotoes.length || maxSelect == -1\" class=\"addImageBlock\" @tap=\"addImage\">\n\t\t\t\t\t\t\t<image :src=\"'/bundle/static/mine_paizhao.png'\" class=\"add-image\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t<text>照片/拍摄</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"question-space\" >\n\t\t\t\t\t\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\t\t<!-- 提交评估  先提交 护士签名 再提交评估单填写内容-->\n\t\t<view class=\"footer\">\n\t\t\t<button class=\"submit-btn\"  @click=\"submitNursingRecordFun\">确认签退</button>\n\t\t</view>\n\n   </view>\n</template>\n\n\n<script>\n\timport zyTag from '@/bundle/components/zy-tag/zy-tag.vue'\n\timport catSignature from '@/bundle/components/sign-canvas/sign-canvas.vue'\n\timport {TOKEN} from '@/sheep/config/cachekey.js'\n\timport Cache from '@/sheep/config/cache.js'\n\timport {pathToBase64} from '@/js_sdk/mmmm-image-tools/index.js'\n\t\n\t\n\tconst QQMapWX = require('@/common/qqmap-wx-jssdk.min.js');\n\texport default {\n\t\tcomponents:{\n\t\t\tzyTag,\n\t\t\tcatSignature\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t/* 服务对象信息 */\n\t\t\t\tappraisePerson:{},\n\t\t\t\titemSn: '',\n\t\t\t\torder_id:'',\n\t\t\t\tstep_id:'',\n\t\t\t\t\n\t\t\t\tmapInstance: null,\n\t\t\t\t/* 护理记录拍照签到 */\n\t\t\t\trecordPhotoes:[],\n\t\t\t\t// 添加照片数量最大 4张\n\t\t\t\tmaxCount: 4,\n\t\t\t\timageUrl:[],\n\t\t\t\tattach:'',\n\t\t\t\t/* 当前位置 */\n\t\t\t\tisAuth: -1, // -1: 未授权  0: 拒绝授权  1:已授权\n\t\t\t\t// 当前位置\n\t\t\t\tnurserLocation:{\n\t\t\t\t\tlatitude: '',\n\t\t\t\t\tlongitude: '',\n\t\t\t\t\taddress: ''\n\t\t\t\t},\n\t\t\t\t/* 签名 */\n\t\t\t\tisShowSign: false,\n\t\t\t\tsignImage: '',\n\t\t\t\t/* 医废分类tag */\n\t\t\t\twasteSortList: [\n\t\t\t\t\t{\n\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\tname:'感染性废物'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\tname:'损伤性废物'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\tname:'化学性废物'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\tname:'药物性废物'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\tname:'病理性废物'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\tname:'其他'\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t/* 医疗废物重量数量 */\n\t\t\t\twasteCountValue:'',\n\t\t\t\t/* 保存 baseData list */\n\t\t\t\tsaveBaseDataList:[]\n\t\t\t}\n\t\t},\n\t\tonLoad(options) {\n\t\t\tthis.$set(this,'recordPhotoes',this.recordPhotoes.splice(1,1));\n\t\t\t//初始化返回结果changeRecordPhotoes\n\t\t\tthis.$emit('changeRecordPhotoes',this.recordPhotoes);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tconst {item_sn,order_id} = options\n\t\t\tconsole.log('护理记录订单itemSn ',item_sn)\n\t\t\tthis.itemSn = item_sn\n\t\t\tthis.order_id = order_id\n\t\t\t\n\t\t\tconst personInfo = Cache.get('sendPersonInfo')\n\t\t\tthis.appraisePerson = personInfo\n\t\t\tconsole.log('护理记录订单options ',this.appraisePerson)\n\t\t\tthis.step_id = personInfo.step_id\n\t\t\tconsole.log('护理记录订单step_id ',this.step_id)\n\t\t\t\n\t\t},\n\t\t\n\t\tmethods: {\n\t\t\tinputData(event, dataValue) {\n\t\t\t  // var value = event.target.value;\n\t\t\t  console.log('医疗废物重量或数量event ',event,dataValue)\n\t\t\t  // this.formData[dataValue] = event;\n\t\t\t  this.wasteCountValue = event\n\t\t\t},\n\t\t\t\n\t\t\t/* 提交医废收集照片 */\n\t\t\tsubmitNursingRecordFun(){\n\t\t\t\tif(this.wasteCountValue == ''){\n\t\t\t\t    uni.showToast({\n\t\t\t\t    \ttitle:'请填写医废废物重量',\n\t\t\t\t\t\ticon:'none'\n\t\t\t\t    })\n\t\t\t\t\t\n\t\t\t\t    return;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.recordPhotoes.length == 0){\n\t\t\t\t    uni.showToast({\n\t\t\t\t    \ttitle:'请选择照片',\n\t\t\t\t    \ticon:'none'\n\t\t\t\t    })\n\t\t\t\t    return;\n\t\t\t\t}\n\t\t\t\t// console.log('护理记录照片recordPhotoes',this.recordPhotoes)\n\t\t\t\tlet count = 0\n\t\t\t\t// uni.showLoading({\n\t\t\t\t// \ttitle:'正在提交中...'\n\t\t\t\t// })\n\t\t\t\tthis.uploadImagesFun(count)\n\t\t\t\t\n\t\t\t},\n\t\t\t/* 图片上传fun */\n\t\t\tuploadImagesFun(count){\n\t\t\t\tvar that = this;\n\t\t\t\tconsole.log('医废照片files',this.recordPhotoes)\n\t\t\t\t\n\t\t\t\tconst tokens = '3252348cc6324c00a2b585ca2ec1cc87'\n\t\t\t\t\n\t\t\t\tuni.uploadFile({\n\t\t\t\t\turl:'https://api.depin.tech/file/upload',\n\t\t\t\t\tfilePath: this.recordPhotoes[count],\n\t\t\t\t\tname:'file',\n\t\t\t\t\tformData:{token: tokens,cate: '医废照片'},\n\t\t\t\t\tsuccess: (uploadRes) => {\n\t\t\t\t\t\tconsole.log('医废照片uploadRes',uploadRes)\n\t\t\t\t\t\tconst resData = JSON.parse(uploadRes.data)\n\t\t\t\t\t\tconsole.log('医废照片resData',resData)\n\t\t\t\t\t\tif(resData.code===0){\n\t\t\t\t\t\t\tthis.imageUrl.push(resData.data.url)\n\t\t\t\t\t\t\tcount++\n\t\t\t\t\t\t\tif(count == this.recordPhotoes.length){\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tfor(var i = 0;i<this.imageUrl.length;i++){\n\t\t\t\t\t\t\t\t\tthis.attach += this.imageUrl[i]+','\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.attach = this.attach.substring(0,this.attach.length-1)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.uploadImagesFun(count)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tconsole.log(resData)\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\ttitle:'图片上传失败'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\tfail: (uploadError) => {\n\t\t\t\t\t\tconsole.log('医废照片error',uploadError)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t},\n\t\t\t/* 上传签名信息 */\n\t\t\tuploadSignInfoFun(){\n\t\t\t\tif(this.signImage == ''){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:'请签名',\n\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tconst params = {\n\t\t\t\t\ttoken: Cache.get(TOKEN),\n\t\t\t\t\tcate: '签退签字',\n\t\t\t\t}\n\t\t\t\tuni.uploadFile({\n\t\t\t\t\turl:'https://api.depin.tech/file/upload',\n\t\t\t\t\tfilePath: this.signImage,\n\t\t\t\t\tname:'file',\n\t\t\t\t\tformData:params,\n\t\t\t\t\tsuccess: (uploadRes) => {\n\t\t\t\t\t\tconsole.log('上传签名res',uploadRes)\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\turl,uid\n\t\t\t\t\t\t} = uploadRes\n\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\tfail: (uploadError) => {\n\t\t\t\t\t\tconsole.log('上传签名error',uploadError)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t/* 拍照签到 */\n\t\t\taddImage(){\n\t\t\t\t\n\t\t\t\tvar that = this;\n\t\t\t\tif(this.recordPhotoes.length >= this.maxCount){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:'最多上传四张图片',\n\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\tcomplete:function(res){\n\t\t\t\t\t\t\tthat.$emit('changeRecordPhotoes',that.recordPhotoes);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t\n\t\t\t\t\tuni.chooseImage({\n\t\t\t\t\t\tcount:4,\n\t\t\t\t\t\tsuccess:function(res){\n\t\t\t\t\t\t\tlet tempFiles = res.tempFiles;\n\t\t\t\t\t\t\tvar photoList = [];\n\t\t\t\t\t\t\ttempFiles.forEach(function(item,index){\n\t\t\t\t\t\t\t\t/* 判断图片大小是否超标 直接压缩 */\n\t\t\t\t\t\t\t\tuni.compressImage({\n\t\t\t\t\t\t\t\t\tsrc: item.path,\n\t\t\t\t\t\t\t\t\tquality: 60,\n\t\t\t\t\t\t\t\t\tsuccess:function(res){\n\t\t\t\t\t\t\t\t\t\tconsole.log('压缩图片res',res)\n\t\t\t\t\t\t\t\t\t\tfor(var i=0;i<that.recordPhotoes.length;i++){\n\t\t\t\t\t\t\t\t\t\t\tphotoList.push(that.recordPhotoes[i])\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif(that.maxSelect > 0){\n\t\t\t\t\t\t\t\t\t\t\tfor(var i=0;i<Math.min(that.maxSelect - that.recordPhotoes.length, res.tempFilePaths.length);i++){\n\t\t\t\t\t\t\t\t\t\t\t\tphotoList.push(res.tempFilePaths[i])\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\tfor(var i=0;i<res.tempFilePaths.length;i++){\n\t\t\t\t\t\t\t\t\t\t\t\tphotoList.push(res.tempFilePaths[i])\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail:function(err){\n\t\t\t\t\t\t\tconsole.log('选取图片err',err)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t/* 长按图片操作 */\n\t\t\timageMenu(i){\n\t\t\t\t//console.log(i);\n\t\t\t\tvar that = this;\n\t\t\t\tuni.showActionSheet({\n\t\t\t\t\titemList:[\"向前移动\",\"向后移动\",\"替换图片\",\"删除图片\"],\n\t\t\t\t\tsuccess:function(res){\n\t\t\t\t\t\tconsole.log(res.tapIndex);\n\t\t\t\t\t\t/* 向前移动 */\n\t\t\t\t\t\tif(res.tapIndex == 0){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(i > 0){\n\t\t\t\t\t\t\t\tvar photoList = that.recordPhotoes;\n\t\t\t\t\t\t\t\tvar img = photoList[i];\n\t\t\t\t\t\t\t\tphotoList[i] = photoList[i-1];\n\t\t\t\t\t\t\t\tphotoList[i-1] = img;\n\t\t\t\t\t\t\t\tvar newPhotoList = [];\n\t\t\t\t\t\t\t\tfor(var j=0;j<photoList.length;j++){\n\t\t\t\t\t\t\t\t\tnewPhotoList.push(photoList[j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthat.$set(that,'recordPhotoes',newPhotoList);\n\t\t\t\t\t\t\t\tthat.$emit('changeRecordPhotoes',that.recordPhotoes);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle:'无可替换',\n\t\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\t\tcomplete:function(res){\n\t\t\t\t\t\t\t\t\t\tthat.$emit('changeRecordPhotoes',that.recordPhotoes);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* 向后移动 */\n\t\t\t\t\t\telse if(res.tapIndex == 1){\n\t\t\t\t\t\t\t//向后\n\t\t\t\t\t\t\tif(i < that.recordPhotoes.length - 1){\n\t\t\t\t\t\t\t\tvar photoList = that.recordPhotoes;\n\t\t\t\t\t\t\t\tvar img = photoList[i];\n\t\t\t\t\t\t\t\tphotoList[i] = photoList[i+1];\n\t\t\t\t\t\t\t\tphotoList[i+1] = img;\n\t\t\t\t\t\t\t\tvar newPhotoList = [];\n\t\t\t\t\t\t\t\tfor(var j=0;j<photoList.length;j++){\n\t\t\t\t\t\t\t\t\tnewPhotoList.push(photoList[j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthat.$set(that,'recordPhotoes',newPhotoList);\n\t\t\t\t\t\t\t\tthat.$emit('changeRecordPhotoes',that.recordPhotoes);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle:'无可替换',\n\t\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\t\tcomplete:function(res){\n\t\t\t\t\t\t\t\t\t\tthat.$emit('changeRecordPhotoes',that.recordPhotoes);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* 替换图片 */\n\t\t\t\t\t\telse if(res.tapIndex == 2){\n\t\t\t\t\t\t\tuni.chooseImage({\n\t\t\t\t\t\t\t\tcount:4,\n\t\t\t\t\t\t\t\tsuccess:function(res){\n\t\t\t\t\t\t\t\t\tvar photoList = that.recordPhotoes;\n\t\t\t\t\t\t\t\t\t//console.log(photoList);\n\t\t\t\t\t\t\t\t\tvar newPhotoList = [];\n\t\t\t\t\t\t\t\t\tfor(var j=0;j<photoList.length;j++){\n\t\t\t\t\t\t\t\t\t\tif(i!=j){\n\t\t\t\t\t\t\t\t\t\t\tnewPhotoList.push(photoList[j]);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\tnewPhotoList.push(res.tempFilePaths[0])\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//console.log(newPhotoList);\n\t\t\t\t\t\t\t\t\tthat.$set(that,'recordPhotoes',newPhotoList);\n\t\t\t\t\t\t\t\t\t/*that.$nextTick(()=>{\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"refresh\");\n\t\t\t\t\t\t\t\t\t});*/\n\t\t\t\t\t\t\t\t\tthat.$emit('changeRecordPhotoes',that.recordPhotoes);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail:function(err){\n\t\t\t\t\t\t\t\t\tthat.$emit('changeRecordPhotoes',that.recordPhotoes);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* 删除图片 */\n\t\t\t\t\t\telse if(res.tapIndex == 3){\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\ttitle:'消息',\n\t\t\t\t\t\t\t\tcontent:'您确认删除该图片吗？',\n\t\t\t\t\t\t\t\tsuccess:(res)=>{\n\t\t\t\t\t\t\t\t\tif(res.confirm){\n\t\t\t\t\t\t\t\t\t\tvar photoList = that.recordPhotoes;\n\t\t\t\t\t\t\t\t\t\t//console.log(photoList);\n\t\t\t\t\t\t\t\t\t\tvar newPhotoList = [];\n\t\t\t\t\t\t\t\t\t\tfor(var j=0;j<photoList.length;j++){\n\t\t\t\t\t\t\t\t\t\t\tif(i!=j){\n\t\t\t\t\t\t\t\t\t\t\t\tnewPhotoList.push(photoList[j]);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t//console.log(newPhotoList);\n\t\t\t\t\t\t\t\t\t\tthat.$set(that,'recordPhotoes',newPhotoList);\n\t\t\t\t\t\t\t\t\t\t//console.log(that.recordPhotoes);\n\t\t\t\t\t\t\t\t\t\tthat.$emit('changeRecordPhotoes',that.recordPhotoes);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tthat.$emit('changeRecordPhotoes',that.recordPhotoes);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail:err=>{\n\t\t\t\t\t\t\t\t\tthat.$emit('changeRecordPhotoes',that.recordPhotoes);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t/* 图片预览 */\n\t\t\tviewImage(i){\n\t\t\t\tuni.previewImage({\n\t\t\t\t\turls:this.result,\n\t\t\t\t\tcurrent:i\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t/* 签名方法 */\n\t\t\tdoss(){\n\t\t\t\tthis.isShowSign = true\n\t\t\t},\n\t\t\tcloseSign(){\n\t\t\t\tthis.isShowSign = false\n\t\t\t},\n\t\t\tsaveSign(val){\n\t\t\t\tthis.isShowSign = false\n\t\t\t\tthis.signImage = this.$refs.catSign.signImage\n\t\t\t\tconsole.log('执行中签名signImage',this.signImage)\n\t\t\t},\n\t\t\t/* 医废分类 多选标签事件 */\n\t\t\tmultiHandle(item, index) {\n\t\t\t\tthis.wasteSortList[index].checked = !this.wasteSortList[index].checked\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t},\n\t\tprops:{\n\t\t\ttype:{\n\t\t\t\ttype:String,\n\t\t\t\tdefault:\"image\"\n\t\t\t},\n\t\t\t\n\t\t\tmaxSelect:{\n\t\t\t\ttype:Number,\n\t\t\t\tdefault:-1\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"less\">\n\tpage {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.files-upload {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\t.record-title{\n\t\tpadding: 10rpx 20rpx;\n\t}\n\n\t.list-cont {\n\t\tflex: 1;\n\t\tposition: relative;\n\n\t\t.scrool-more {\n\t\t\tposition: absolute;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\ttop: 0;\n\t\t\tbottom: 0;\n\t\t}\n\n\t\t\n\t}\n\t\n\t.u-block__title{\n\t\tfont-weight: bold;\n\t}\n\t.option-required{\n\t\tcolor: #FF3B00;\n\t}\n\t.space-fill{\n\t\theight: 10rpx;\n\t\twidth: 100%;\n\t}\n\t.tag_container {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tflex-direction: row;\n\t\tflex-wrap: wrap;\n\t\tpadding: 10rpx;\n\t}\n\t/* 签字 */\n\t.question-sign{\n\t\tpadding:10rpx 20rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\t.imgs{\n\t\t\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tbackground-color: #d6d6d6;\n\t\tmargin-top: 20rpx;\n\t\twidth: 95%;\n\t\theight: 400rpx;\n\t\tborder: 1rpx solid #ddd;\n\t\tborder-radius: 10rpx;\n\t}\n\t.imgs text{\n\t\ttext-align: center;\n\t}\n\t.logo_text{\n\t\tpadding:10rpx 20rpx;\n\t}\n\t\n\t/* 位置信息 */\n\t.location-address {\n\t\tcolor: gray;\n\t\tpadding:10rpx 20rpx;\n\t\t.img-loaction{\n\t\t\tmargin-right: 10rpx;\n\t\t\twidth: 25rpx;\n\t\t\theight: 25rpx;\n\t\t}\n\t}\n\t.question-space{\n\t\theight: 100rpx;\n\t}\n\t/* 拍照签到 */\n\t.photo-sign{\n\t\tpadding: 20rpx;\n\t}\n\t/* 底部按钮 */\n\t.footer {\n\t\tcolor: #fff;\n\t\tline-height: 100rpx;\n\t\tflex: 0 0 100rpx;\n\t\t/* 不放大不缩小固定100rpx */\n\t\t\n\t\t.submit-btn{\n\t\t\tbackground-image: linear-gradient(to right, #39C9BC,#6DE8CC);\n\t\t\tcolor: white;\n\t\t}\n\t}\n\t\n\t/* 拍照签到 */\n\t.columnDisplay{\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmargin-left: 2.5%;\n\t\tmargin-right: 2.5%;\n\t\twidth: 95%;\n\t}\n\t\n\t// view{\n\t// \tword-break: break-all;\n\t// }\n\t\n\t.borderGrey{\n\t\tpadding-bottom: 10upx;\n\t\tborder-bottom: #ececec solid 1px;\n\t\tmargin-bottom: 10upx;\n\t}\n\t\n\t.imageContainer{\n\t\tdisplay: block;\n\t\twidth: 95%;\n\t\tpadding-left: 2.5%;\n\t\tpadding-right: 2.5%;\n\t\tpadding-top: 10upx;\n\t\tpadding-bottom: 10upx;\n\t}\n\t\n\t.imageBlock{\n\t\twidth: 21.6vw;\n\t\tmargin-right: 0.4%;\n\t\tmargin-left: 0.4%;\n\t\tmargin-bottom: 0.4%;\n\t\tmargin-top: 0.4%;\n\t\tdisplay: flex;\n\t\theight: 21.6vw;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tbackground-color: #F1F1F1;\n\t\tfloat: left;\n\t\tline-height: 23%;\n\t}\n\t.addImageBlock{\n\t\twidth: 21.6vw;\n\t\tmargin-right: 0.4%;\n\t\tmargin-left: 0.4%;\n\t\tmargin-bottom: 0.4%;\n\t\tmargin-top: 0.4%;\n\t\tdisplay: flex;\n\t\theight: 21.6vw;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tbackground-color: #F1F1F1;\n\t\tfloat: left;\n\t\tline-height: 23%;\n\t\t\n\t\t.add-image{\n\t\t\twidth: 15vw;\n\t\t\theight: 15vw;\n\t\t}\n\t\t\n\t}\n\t.addImageBlock text{\n\t\tfont-size: 20rpx;\n\t}\n\t\n\t\n\t\n\t\n</style>\n","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./files_upload.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./files_upload.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}