{"version":3,"sources":["webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp_demo/uniapp_demo/bundle_b/components/Flame-chooseLocation/components/Flame-chooseLocation/Flame-chooseLocation.vue?049a","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp_demo/uniapp_demo/bundle_b/components/Flame-chooseLocation/components/Flame-chooseLocation/Flame-chooseLocation.vue?659a","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp_demo/uniapp_demo/bundle_b/components/Flame-chooseLocation/components/Flame-chooseLocation/Flame-chooseLocation.vue?9899","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp_demo/uniapp_demo/bundle_b/components/Flame-chooseLocation/components/Flame-chooseLocation/Flame-chooseLocation.vue?2399","uni-app:///bundle_b/components/Flame-chooseLocation/components/Flame-chooseLocation/Flame-chooseLocation.vue","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp_demo/uniapp_demo/bundle_b/components/Flame-chooseLocation/components/Flame-chooseLocation/Flame-chooseLocation.vue?318a","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp_demo/uniapp_demo/bundle_b/components/Flame-chooseLocation/components/Flame-chooseLocation/Flame-chooseLocation.vue?d711"],"names":["components","mixins","model","event","props","value","mapkey","type","default","exact","data","keyword","showPop","showCancel","map","initLoc","selectAdress","searchList","computed","watch","val","created","onLoad","onShow","mounted","methods","focusInput","hideCancel","lat","lng","changeSearch","detail","selectLoc","item","requireFunc","params","path","key","output","url","scriptNode","window","result","document","reject","initCurrentLoc","console","uni","isHighAccuracy","success","longitude","res","latitude","boundary","fail","getIpLoc","location","setLoc","page_size","page_index","flag","searchLoc","initMap","id","viewMode","zoom","center","showControl","changeDragend","info","cancel","confirm","filters"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6I;AAC7I;AACwE;AACL;AACsC;;;AAGzG;AAC4N;AAC5N,gBAAgB,iNAAU;AAC1B,EAAE,0FAAM;AACR,EAAE,2GAAM;AACR,EAAE,oHAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA84B,CAAgB,kzBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6Cl6B;AACA;AACA;AACA;AACA;AACA;AACA;AANA,eAOA;EACAA;EACAC;EACAC;IACAC;EACA;EACAC;IACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;EACA;EACAE;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;EACAC;IACAd;MACA;MACAe;IACA;EACA;EACAC;EACAC;IACA;EAAA,CACA;EACAC;EACAC;EACAC;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA,4BAGA;QAFAC;QACAC;MAEA;MACA;IACA;IACAC,0CAEA;MAAA,IADAC;MAEA;QACA;MACA;QACA;UACApB;QACA;MACA;IACA;IACAqB;MACA;MACA,qBAGAC;QAFAL;QACAC;MAEA;IACA;IACAK;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAC;gBAAAC;gBAAA,iCAEA;kBACA;oBACAC;oBACAC;kBAAA,GACAH,OACA;kBACA;kBACA;kBACA;kBACA;kBACAI;kBACA;oBAEA;oBACA;sBACAA;oBACA;kBACA;kBAGA;kBACAC;;kBAEA;kBACAC;oBACAC;oBACA;oBACAC;kBACA;;kBAEA;kBACAH;oBACAI;oBACA;oBACAD;kBACA;;kBAGA;kBACAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA2BA;IACA;IACAE;MAAA;MACA;QAEA;QACA;UAEA;QACA;UACAC;UACA;UACAC;YACAxC;YACAyC;YACAC;cACAH;cACA,IACAI,YAEAC,IAFAD;gBACAE,WACAD,IADAC;cAEA;cACA;gBACAC;cACA;YACA;YACAC;cACAR;cACA;YACA;UACA;UACAA;QACA;MACA;QACA;MACA;IACA;IACAS;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAJ;gBACA;kBAAA,uBAMAA,WAJAK,UACA5B,gCACAC;kBAIAwB;kBACA;oBACAA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAI;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAtB;kBACAuB;kBACAC;gBAAA,GACAjD;gBAAA;gBAAA,OAEA;cAAA;gBAAAyC;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBAAA,KACAS;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAEA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA1B;kBACAuB;kBACAC;gBAAA,GACAjD;gBAAA;gBAAA,OAEA;cAAA;gBAAAyC;gBACA;kBACA;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAW,iCAGA;MAAA;MAAA,IAFAlC;QACAC;MAEA,yBAGA;QAFAkC;QACAP;MAEA,qFACA3B;MACA;MACA;QACAmC;QACAC;QAAA;QACAC;QAAA;QACAC;MACA;MACA;QACA;MACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA,IACAxC,MAEAyC,KAFAzC;QACAC,MACAwC,KADAxC;MAEA;MACA;QACAwB;MACA;IACA;IACAiB;MACA;IACA;IACAC;MACA;MACA;IACA;EACA;EACAC;AACA;AAAA,2B;;;;;;;;;;;;;ACtUA;AAAA;AAAA;AAAA;AAAqrD,CAAgB,y8CAAG,EAAC,C;;;;;;;;;;;ACAzsD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"bundle_b/components/Flame-chooseLocation/components/Flame-chooseLocation/Flame-chooseLocation.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./Flame-chooseLocation.vue?vue&type=template&id=1798f9d2&scoped=true&\"\nvar renderjs\nimport script from \"./Flame-chooseLocation.vue?vue&type=script&lang=js&\"\nexport * from \"./Flame-chooseLocation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Flame-chooseLocation.vue?vue&type=style&index=0&id=1798f9d2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1798f9d2\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"bundle_b/components/Flame-chooseLocation/components/Flame-chooseLocation/Flame-chooseLocation.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Flame-chooseLocation.vue?vue&type=template&id=1798f9d2&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Flame-chooseLocation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Flame-chooseLocation.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"loc-choose\" v-if=\"showPop\">\r\n\t\t<view class=\"head-btn\">\r\n\t\t\t<view class=\"cancel\" @click=\"cancel\">\r\n\t\t\t\t<icon type=\"cancel\" size=\"30\" color=\"#333\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"submit\">\r\n\t\t\t\t<button class=\"submit-btn\" size=\"mini\" type=\"primary\" :disabled=\"!selectAdress.id\" @click=\"confirm\">\r\n\t\t\t\t\t<icon type=\"success_no_circle\" size=\"20\" color=\"#fff\" />\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"map-box\">\r\n\t\t\t<view class=\"marker\">\r\n\t\t\t\t<image src=\"../static/loc.png\" class=\"loc-icon\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view id=\"container\"></view>\r\n\t\t</view>\r\n\t\t<view class=\"search-content\">\r\n\t\t\t<!-- 搜索框 -->\r\n\t\t\t<view class=\"search\">\r\n\t\t\t\t<view class=\"search-input\"><input placeholder=\"搜索地点\" @focus=\"focusInput\" @input=\"changeSearch\"\r\n\t\t\t\t\t\tv-model=\"keyword\" /></view>\r\n\t\t\t\t<text class=\"search-cancel\" v-if=\"showCancel\" @click=\"hideCancel\">取消</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 搜索列表 -->\r\n\t\t\t<scroll-view scroll-y=\"true\" class=\"scroll-Y\">\r\n\t\t\t\t<view class=\"search-list\">\r\n\t\t\t\t\t<view class=\"search-list-item\" v-for=\"item in searchList\" :key=\"item.id\" @click=\"selectLoc(item)\">\r\n\t\t\t\t\t\t<view class=\"list-item-left\">\r\n\t\t\t\t\t\t\t<view class=\"\">{{ item.title }}</view>\r\n\t\t\t\t\t\t\t<view class=\"font-12\">{{ item.address }}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"is-checked\" v-if=\"selectAdress.id == item.id\">\r\n\t\t\t\t\t\t\t<icon type=\"success_no_circle\" size=\"25\" color=\"#007aff\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n\r\n<script>\r\n\t/*\r\n\t基于腾讯地图的H5端选择地图组件\r\n\t* @property {Boolean} value = [false|true] 控制组件显示或隐藏\r\n\t* @property {Boolean} exact = [false|true] 是否开启移动端精确定位\r\n\t* @property {String} mapkey = '' 腾讯地图开放平台申请的key\r\n\t* @event {Function} confirm 确认选择 ,返回选择的位置信息\r\n*/\r\n\texport default {\r\n\t\tcomponents: {},\r\n\t\tmixins: [],\r\n\t\tmodel: {\r\n\t\t\tevent: 'change'\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\tvalue: {},\r\n\t\t\tmapkey: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\texact: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tkeyword: '',\r\n\t\t\t\tshowPop: false,\r\n\t\t\t\tshowCancel: false,\r\n\t\t\t\tmap: {},\r\n\t\t\t\tinitLoc: [],\r\n\t\t\t\tselectAdress: {},\r\n\t\t\t\tsearchList: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {},\r\n\t\twatch: {\r\n\t\t\tvalue(val) {\r\n\t\t\t\tthis.showPop = val\r\n\t\t\t\tval && this.initCurrentLoc()\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {},\r\n\t\tonLoad(option) {\r\n\t\t\t// option路由传值接收参数\r\n\t\t},\r\n\t\tonShow() {},\r\n\t\tmounted() {},\r\n\t\tmethods: {\r\n\t\t\tfocusInput() {\r\n\t\t\t\tthis.showCancel = true\r\n\t\t\t},\r\n\t\t\thideCancel() {\r\n\t\t\t\tthis.showCancel = false\r\n\t\t\t\tthis.keyword = ''\r\n\t\t\t\tthis.selectAdress = {}\r\n\t\t\t\tconst {\r\n\t\t\t\t\tlat,\r\n\t\t\t\t\tlng\r\n\t\t\t\t} = this.initLoc[0].location\r\n\t\t\t\tthis.searchList = this.initLoc\r\n\t\t\t\tthis.map.setCenter(new TMap.LatLng(lat, lng))\r\n\t\t\t},\r\n\t\t\tchangeSearch({\r\n\t\t\t\tdetail\r\n\t\t\t}) {\r\n\t\t\t\tif (!detail.value) {\r\n\t\t\t\t\tthis.searchList = []\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.searchLoc({\r\n\t\t\t\t\t\tkeyword: encodeURI(detail.value)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tselectLoc(item) {\r\n\t\t\t\tthis.selectAdress = item\r\n\t\t\t\tconst {\r\n\t\t\t\t\tlat,\r\n\t\t\t\t\tlng\r\n\t\t\t\t} = item.location\r\n\t\t\t\tthis.map.setCenter(new TMap.LatLng(lat, lng))\r\n\t\t\t},\r\n\t\t\tasync requireFunc(params = {}, path = '') {\r\n\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\tkey: this.mapkey,\r\n\t\t\t\t\t\toutput: 'jsonp',\r\n\t\t\t\t\t\t...params\r\n\t\t\t\t\t};\r\n\t\t\t\t\t// 1.初始化url\r\n\t\t\t\t\tvar url = `https://apis.map.qq.com${path}`;\r\n\t\t\t\t\tlet dataString = url.indexOf('?') === -1 ? '?' : '&'\r\n\t\t\t\t\tlet callbackName = `jsonpCB_${ Date.now() }`;\r\n\t\t\t\t\turl += `${ dataString }callback=${ callbackName }`\r\n\t\t\t\t\tif (data) {\r\n\r\n\t\t\t\t\t\t// 2.有请求参数，依次添加到url\r\n\t\t\t\t\t\tfor (let k in data) {\r\n\t\t\t\t\t\t\turl += `&${ k }=${ data[k] }`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tlet scriptNode = document.createElement('script');\r\n\t\t\t\t\tscriptNode.src = url;\r\n\r\n\t\t\t\t\t// 3. callback\r\n\t\t\t\t\twindow[callbackName] = (result) => {\r\n\t\t\t\t\t\tresult ? resolve(result) : reject('没有返回数据');\r\n\t\t\t\t\t\tdelete window[callbackName];\r\n\t\t\t\t\t\tdocument.body.removeChild(scriptNode);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 4. 异常情况\r\n\t\t\t\t\tscriptNode.addEventListener('error', () => {\r\n\t\t\t\t\t\treject('接口返回数据失败');\r\n\t\t\t\t\t\tdelete window[callbackName];\r\n\t\t\t\t\t\tdocument.body.removeChild(scriptNode);\r\n\t\t\t\t\t}, false)\r\n\r\n\r\n\t\t\t\t\t// 5. 开始请求\r\n\t\t\t\t\tdocument.body.appendChild(scriptNode)\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// return new Promise((reslove, reject) => {\r\n\t\t\t\t// \tlet params = {\r\n\t\t\t\t// \t\tkey: this.mapkey,\r\n\t\t\t\t// \t\toutput: 'jsonp',\r\n\t\t\t\t// \t\t...data\r\n\t\t\t\t// \t}\r\n\t\t\t\t// \t$.ajax({\r\n\t\t\t\t// \t\ttype: 'get',\r\n\t\t\t\t// \t\turl: `https://apis.map.qq.com${path}`,\r\n\t\t\t\t// \t\tasync: false,\r\n\t\t\t\t// \t\tdata: params,\r\n\t\t\t\t// \t\tdataType: 'jsonp',\r\n\t\t\t\t// \t\theaders: {\r\n\t\t\t\t// \t\t\t'Access-Control-Allow-Origin': '*',\r\n\t\t\t\t// \t\t\t'Access-Control-Allow-Methods': 'GET,POST'\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// \t\tsuccess: function(result) {\r\n\t\t\t\t// \t\t\treslove(result)\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// \t\terror: function(xhr, errorType, error) {\r\n\t\t\t\t// \t\t\treject(xhr)\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// \t\tcomplete: function() {}\r\n\t\t\t\t// \t})\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\t\t\t// 初始化当前位置\r\n\t\t\tinitCurrentLoc() {\r\n\t\t\t\tif (this.exact) {\r\n\t\t\r\n\t\t\t\t\t// pc端通过IP定位获取当前城市位置，没法精确定位当前位置\r\n\t\t\t\t\tif (uni.getSystemInfoSync().deviceType == 'pc') {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tthis.getIpLoc()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(22222222);\r\n\t\t\t\t\t\t// 移动端可以先使用获取当前位置方法，定位失败再使用IP定位\r\n\t\t\t\t\t\tuni.getLocation({\r\n\t\t\t\t\t\t\ttype: 'gcj02',\r\n\t\t\t\t\t\t\tisHighAccuracy: true,\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tconsole.log('获取定位成功',res);\r\n\t\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\t\tlongitude,\r\n\t\t\t\t\t\t\t\t\tlatitude\r\n\t\t\t\t\t\t\t\t} = res\r\n\t\t\t\t\t\t\t\tlet boundary = `nearby(${latitude},${longitude},1000)`\r\n\t\t\t\t\t\t\t\tthis.setLoc({\r\n\t\t\t\t\t\t\t\t\tboundary\r\n\t\t\t\t\t\t\t\t}, 1)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: e => {\r\n\t\t\t\t\t\t\t\tconsole.log('获取定位失败',e)\r\n\t\t\t\t\t\t\t\tthis.getIpLoc()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tconsole.log(3333333333333);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getIpLoc()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getIpLoc() {\r\n\t\t\t\tconst res = await this.requireFunc({}, '/ws/location/v1/ip')\r\n\t\t\t\tif (res.status == 0) {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tlocation: {\r\n\t\t\t\t\t\t\tlat,\r\n\t\t\t\t\t\t\tlng\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} = res.result\r\n\r\n\t\t\t\t\tlet boundary = `nearby(${lat},${lng},1000)`\r\n\t\t\t\t\tthis.setLoc({\r\n\t\t\t\t\t\tboundary\r\n\t\t\t\t\t}, 1)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync setLoc(data, flag) {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tpage_size: 20,\r\n\t\t\t\t\tpage_index: 1,\r\n\t\t\t\t\t...data\r\n\t\t\t\t}\r\n\t\t\t\tconst res = await this.requireFunc(params, '/ws/place/v1/search')\r\n\t\t\t\tif (res.status == 0) {\r\n\t\t\t\t\tif (res.data && res.data.length) {\r\n\t\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\t\tthis.initLoc = res.data\r\n\t\t\t\t\t\t\tthis.initMap(res.data[0].location)\r\n\t\t\t\t\t\t\tif (this.selectAdress.id) return\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.searchList = res.data\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync searchLoc(data) {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tpage_size: 20,\r\n\t\t\t\t\tpage_index: 1,\r\n\t\t\t\t\t...data\r\n\t\t\t\t}\r\n\t\t\t\tconst res = await this.requireFunc(params, '/ws/place/v1/suggestion')\r\n\t\t\t\tif (res.status == 0) {\r\n\t\t\t\t\tif (res.data && res.data.length) {\r\n\t\t\t\t\t\tthis.searchList = res.data\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinitMap({\r\n\t\t\t\tlat,\r\n\t\t\t\tlng\r\n\t\t\t}) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tlocation\r\n\t\t\t\t} = this.selectAdress\r\n\t\t\t\tconst center = id ? new TMap.LatLng(location.lat, location.lng) : new TMap.LatLng(lat,\r\n\t\t\t\t\tlng)\r\n\t\t\t\t//初始化地图\r\n\t\t\t\tthis.map = new TMap.Map('container', {\r\n\t\t\t\t\tviewMode: '2D',\r\n\t\t\t\t\tzoom: 15, //设置地图缩放级别\r\n\t\t\t\t\tcenter: center, //设置地图中心点坐标\r\n\t\t\t\t\tshowControl: false\r\n\t\t\t\t})\r\n\t\t\t\tthis.map.on('dragend', () => {\r\n\t\t\t\t\tthis.changeDragend()\r\n\t\t\t\t})\r\n\t\t\t\tthis.map.on('dblclick', () => {\r\n\t\t\t\t\tthis.changeDragend()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 拖拽结束更新列表\r\n\t\t\tchangeDragend() {\r\n\t\t\t\tthis.selectAdress = {}\r\n\t\t\t\tconst info = this.map.getCenter()\r\n\t\t\t\tconst {\r\n\t\t\t\t\tlat,\r\n\t\t\t\t\tlng\r\n\t\t\t\t} = info\r\n\t\t\t\tconst boundary = `nearby(${lat},${lng},1000)`\r\n\t\t\t\tthis.setLoc({\r\n\t\t\t\t\tboundary\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcancel() {\r\n\t\t\t\tthis.$emit('change', false)\r\n\t\t\t},\r\n\t\t\tconfirm() {\r\n\t\t\t\tthis.$emit('change', false)\r\n\t\t\t\tthis.$emit('confirm', this.selectAdress)\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters: {}\r\n\t}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\t.font-12 {\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.loc-choose {\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 999;\r\n\t\tbackground-color: #fff;\r\n\r\n\t\tview {\r\n\t\t\tbox-sizing: border-box;\r\n\t\t}\r\n\r\n\t\t.head-btn {\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tposition: fixed;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tz-index: 1080;\r\n\r\n\t\t\t.submit-btn {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tpadding: 10rpx 36rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.map-box {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 50%;\r\n\t\t\tposition: relative;\r\n\r\n\t\t\t.marker {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 50%;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttransform: translate(-50%, -50%);\r\n\t\t\t\tz-index: 9;\r\n\r\n\t\t\t\t.loc-icon {\r\n\t\t\t\t\twidth: 60rpx;\r\n\t\t\t\t\theight: 60rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t#container {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.search-content {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 50%;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tpadding: 20rpx 20rpx;\r\n\r\n\t\t\t.search {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-bottom: 24rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.search-input {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tbackground-color: #ebebeb;\r\n\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\tpadding: 10rpx 20rpx;\r\n\t\t\t\tmargin-right: 26rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.search-cancel {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.scroll-Y {\r\n\t\t\t\theight: calc(100% - 34px);\r\n\t\t\t}\r\n\r\n\t\t\t.search-list {\r\n\t\t\t\t.search-list-item {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\t\tborder-bottom: 2rpx solid #d3d3d3;\r\n\r\n\t\t\t\t\t&:last-of-type {\r\n\t\t\t\t\t\tborder: none;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.list-item-left {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.is-checked {\r\n\t\t\t\t\t\tpadding: 0 20rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.font-12 {\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Flame-chooseLocation.vue?vue&type=style&index=0&id=1798f9d2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Flame-chooseLocation.vue?vue&type=style&index=0&id=1798f9d2&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1706841881824\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}