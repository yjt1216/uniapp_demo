{"version":3,"sources":["uni-app:///main.js","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp_demo/uniapp_demo/bundle_b/pages/weixin_openid/weixin_openid.vue?c216","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp_demo/uniapp_demo/bundle_b/pages/weixin_openid/weixin_openid.vue?7f95","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp_demo/uniapp_demo/bundle_b/pages/weixin_openid/weixin_openid.vue?987b","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp_demo/uniapp_demo/bundle_b/pages/weixin_openid/weixin_openid.vue?8a75","uni-app:///bundle_b/pages/weixin_openid/weixin_openid.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","testLink","onLoad","methods","testing","login","appid","redirect_uri","response_type","scope","state","weixin","window","getUserInfo","console","uni","url","code","success","getUrlParam"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,sBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAsI;AACtI;AACiE;AACL;;;AAG5D;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,oGAAM;AACR,EAAE,6GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAy2B,CAAgB,2yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCgC73B;EACAC;IACA;MACAC;IACA;EACA;EACAC;IACA;IACA;EACA;EAEAC;IAEA;AACA;AACA;AACA;IACAC;MACA;MACA;MACA;MACA;QACA;QACA;MACA;QACA;MAAA;IAEA;IAEA;AACA;AACA;AACA;AACA;IACAC;MACA;MACA;QACA;QACAC;QACA;QACAC;QACA;QACAC;QACA;QACAC;QACA;QACAC;MACA;MACA;MACA;IACA;IAEA;AACA;AACA;AACA;AACA;AACA;IACAC;MACA;MACA;MACA;MACA;MACAC;IACA;IAEA;AACA;AACA;AACA;AACA;AACA;IACAC;MACAC;MACAC;QACAC;QAAA;QACAhB;UAAAiB;QAAA;QAAA;QACAC;UACA;UACAJ;UACA;UACAC;UACA;UACA;UACA;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;AACA;AACA;AACA;IACAI;MACA;MACA;MACA;QAAA;QACA;MACA;MACA;MACA;IACA;EAEA;AACA;AAAA,2B","file":"bundle_b/pages/weixin_openid/weixin_openid.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './bundle_b/pages/weixin_openid/weixin_openid.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./weixin_openid.vue?vue&type=template&id=e9e887e4&scoped=true&\"\nvar renderjs\nimport script from \"./weixin_openid.vue?vue&type=script&lang=js&\"\nexport * from \"./weixin_openid.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e9e887e4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"bundle_b/pages/weixin_openid/weixin_openid.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./weixin_openid.vue?vue&type=template&id=e9e887e4&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./weixin_openid.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./weixin_openid.vue?vue&type=script&lang=js&\"","<!-- \n\t1. 微信官方文档: https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html\n\t2. 如果您和后端已经在调试微信登录功能了，那就别用申请的测试公众号了(测试公众号仅为了前端自己调试功能)\n\t3. 代码中出现的一些参数,全部去官方文档看,全都有解释\n\t4. 请充分理解,并按照您的需求更改,每个人的需求不同\n\t\n\t————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n\t\n\t【提示\"redirect_url参数错误\"，可利用技术\"伪造线上环境\"】\n\t【提示\"redirect_url参数错误\"，可利用技术\"伪造线上环境\"】\n\t【由于前端本地环境192.168.xx并不是公众号后台设置的网页授权回调域名,所以不可能会授权成功(提示redirect_url参数错误),您需要部署到服务器上,再进行测试】\n\t【如果您觉得每次部署到服务器调试太麻烦,想要在本地(192.168.xx)环境下直接调试功能,请参考如下解决方案】\n\t【https://wangjiabin.blog.csdn.net/article/details/127787561】\n\t【文章内是微信开放平台,换成微信公众平台即可,结果是一样的放心】\n\t【注意！！！请将uni-app默认端口从8080改为80，否则无效，可参考https://wangjiabin.blog.csdn.net/article/details/128081481】\n\t\n\t————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n\t\n\t【如果您按照上面的文章进行了\"伪造线上环境\"操作，结果打开网页仅显示 “Invalid Host header” 黑色文字】\n\t【请按如下文章顺序依次进行操作👇👇👇👇👇】\n\t【1. 首先将8080默认端口改为80(改了的话直接下一步)，详见：https://wangjiabin.blog.csdn.net/article/details/128081481】\n\t【2. 然后再配置一下，详见：https://wangjiabin.blog.csdn.net/article/details/128082511】\n\t【上面两个操作执行后，便可顺利打开项目,可以愉快的进行本地\"伪造线上环境\"开始调试了】\n-->\n\n<template>\n\t<view>\n\t\t<button @click=\"login()\">点击登录</button>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tdata(){\n\t\treturn {\n\t\t\ttestLink:'http://data.szdepin.com/web/wechat/webAuth?app_id=2&app_name=depin_public_mp&back_url=pages%2Findex%2Findex',\n\t\t}\t\n\t},\n\tonLoad() {\n\t\t// 检测是否完成登录\n\t\tthis.testing()\n\t},\n\t\n\tmethods: {\n\t\t\n\t\t/**\n\t\t * 检测是否完成登录\n\t\t * @description 判断参数是否有code\n\t\t */\n\t\ttesting() {\n\t\t\t// code\n\t\t\tconst code = this.getUrlParam('code')\n\t\t\t// 判断是否存在code参数\n\t\t\tif(code) {\n\t\t\t\t// 存在的话,拿code去请求后端接口,获取用户信息\n\t\t\t\tthis.getUserInfo(code)\n\t\t\t}else{\n\t\t\t\t// console.log('不存在code')\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 点击登录\n\t\t * @description 配置好参数,开始登录\n\t\t * @return void\n\t\t */\n\t\tlogin() {\n\t\t\t// 建议从后端接口获取appid(非必须,直接从公众号复制过来写死也行)\n\t\t\tconst data = {\n\t\t\t\t// 公众号appID\n\t\t\t\tappid: 'wx11683108c5129eab',\n\t\t\t\t// 授权后重定向的回调链接地址(需urlEncode对链接进行处理)\n\t\t\t\tredirect_uri: encodeURIComponent(window.location.href),\n\t\t\t\t// 返回类型(默认code)\n\t\t\t\tresponse_type: 'code',\n\t\t\t\t// 应用授权作用域(根据自己需求来)\n\t\t\t\tscope: 'snsapi_userinfo',\n\t\t\t\t// 额外参数\n\t\t\t\tstate: ''\n\t\t\t}\n\t\t\t// 进行微信登录\n\t\t\tthis.weixin(data)\n\t\t},\n\t\t\n\t\t/**\n\t\t * 微信授权登录\n\t\t * @description 传递参数并发起跳转\n\t\t * @param {Object} data - 所需参数\n\t\t * @return void\n\t\t */\n\t\tweixin(data) {\n\t\t\t// 登录之前的其他操作\n\t\t\t// ...\n\t\t\t// 跳转网页开始登录\n\t\t\tlet wxurl = 'http://data.szdepin.com/web/wechat/webAuth?app_id=2&app_name=depin_public_mp&back_url=pages%2Findex%2Findex';\n\t\t\twindow.location.href = `${wxurl}`\n\t\t},\n\t\t\n\t\t/**\n\t\t * 获取用户信息\n\t\t * @description 传给接口code,拿到用户信息后进行操作\n\t\t * @param {String} code - code\n\t\t * @return void\n\t\t */\n\t\tgetUserInfo(code) {\n\t\t\tconsole.log('当前code',code)\n\t\t\tuni.request({\n\t\t\t    url: 'xx',//接口地址。\n\t\t\t    data: { code: code },//code凭证\n\t\t\t    success: (res) => {\n\t\t\t\t\t// 用户信息\n\t\t\t        console.log(res.data)\n\t\t\t\t\t// 马上写入缓存\n\t\t\t\t\tuni.setStorageSync('login', res.data);\n\t\t\t\t\t// 登录完，您要不要跳转页面?\n\t\t\t\t\t// uni.redirectTo({\n\t\t\t\t\t// \turl: 'xxx'\n\t\t\t\t\t// })\n\t\t\t    }\n\t\t\t})\n\t\t},\n\t\t\n\t\t/**\n\t\t * 解析URL参数\n\t\t * @description 截取路由参数\n\t\t * @param {String} name - 要解析的路由参数\n\t\t * @return String\n\t\t */\n\t\tgetUrlParam(name) {\n\t\t\tlet reg = new RegExp('(^|&)'+ name + '=([^&]*)(&|$)')\n\t\t\tlet r = window.location.search.substr(1).match(reg)\n\t\t\tif(r != null){// ok\n\t\t\t\treturn unescape(r[2])\n\t\t\t}\n\t\t\t// false\n\t\t\treturn null\n\t\t},\n\t\t\n\t}\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"sourceRoot":""}