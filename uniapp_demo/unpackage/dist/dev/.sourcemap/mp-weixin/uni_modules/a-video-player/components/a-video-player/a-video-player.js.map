{"version":3,"sources":["webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/uni_modules/a-video-player/components/a-video-player/a-video-player.nvue?fd64","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/uni_modules/a-video-player/components/a-video-player/a-video-player.nvue?7555","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/uni_modules/a-video-player/components/a-video-player/a-video-player.nvue?683a","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/uni_modules/a-video-player/components/a-video-player/a-video-player.nvue?c733","uni-app:///uni_modules/a-video-player/components/a-video-player/a-video-player.nvue","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/uni_modules/a-video-player/components/a-video-player/a-video-player.nvue?7dbf"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","s0","_self","_c","isFullScreen","isLocked","controlsShow","__get_style","lockStyle","s1","s2","headerStyle","s3","footerStyle","m0","secondToMinute","current","m1","duration","s4","showPlayRate","s5","m2","m3","_isMounted","e0","$event","stopPropagation","preventDefault","rateShow","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","emits","name","VideoSlider","ComCoverView","props","videoTitle","type","default","desc","src","historyPlayPosition","xWebkitAirplay","poster","autoplay","controls","fullScreenPadding","showBarrage","enableProgressGesture","showCenterPlayBtn","showDownload","videoContext","isCollect","isOpenBarrage","videoCurrentTime","videoPreTime","currentRate","playing","color","sliderWidth","padding","computed","safePadding","left","style","right","height","beforeCreate","mounted","systemInfo","methods","loadedmetadata","progress","console","collect","e","onclick","changeCurrent","hideControl","clearTimeout","timer","preventHideControl","lockClick","rateShowClick","playVideo","pauseVideo","play","ended","pause","switchRate","timeupdate","fullScreen","controlstoggle"],"mappings":"oKAAA,oIACIA,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,2EACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GAEjBN,EAAIO,cACJP,EAAIQ,UACJR,EAAIO,cACJP,EAAIQ,UACJR,EAAIS,aACAT,EAAIU,YAAY,CAACV,EAAIW,YACrB,MACFC,EACFZ,EAAIO,eACHP,EAAIQ,UACLR,EAAIO,eACHP,EAAIQ,UACLR,EAAIS,aACAT,EAAIU,YAAY,CAACV,EAAIW,YACrB,KACFE,EACFb,EAAIO,eACHP,EAAIQ,UACLR,EAAIO,eACHP,EAAIQ,UACLR,EAAIS,aACAT,EAAIU,YAAY,CAACV,EAAIc,cACrB,KACFC,EACFf,EAAIO,eACHP,EAAIQ,UACLR,EAAIO,eACHP,EAAIQ,UACLR,EAAIS,aACAT,EAAIU,YAAY,CAACV,EAAIgB,cACrB,KACFC,EACFjB,EAAIO,eACHP,EAAIQ,UACLR,EAAIO,eACHP,EAAIQ,UACLR,EAAIS,aACAT,EAAIkB,eAAelB,EAAImB,SACvB,KACFC,EACFpB,EAAIO,eACHP,EAAIQ,UACLR,EAAIO,eACHP,EAAIQ,UACLR,EAAIS,aACAT,EAAIkB,eAAelB,EAAIqB,UACvB,KACFC,GACDtB,EAAIO,eACJP,EAAIO,cACLP,EAAIS,cACJT,EAAIuB,aACAvB,EAAIU,YAAY,CAACV,EAAIc,cACrB,KACFU,GACDxB,EAAIO,eACJP,EAAIO,cACLP,EAAIS,cACJT,EAAIuB,aACAvB,EAAIU,YAAY,CAACV,EAAIc,cACrB,KACFW,GACDzB,EAAIO,eACJP,EAAIO,cACLP,EAAIS,cACJT,EAAIuB,aACAvB,EAAIkB,eAAelB,EAAImB,SACvB,KACFO,GACD1B,EAAIO,eACJP,EAAIO,cACLP,EAAIS,cACJT,EAAIuB,aACAvB,EAAIkB,eAAelB,EAAIqB,UACvB,KACDrB,EAAI2B,aACP3B,EAAI4B,GAAK,SAAUC,GACjBA,EAAOC,kBACPD,EAAOE,iBACP/B,EAAIgC,UAAW,IAGnBhC,EAAIiC,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLjC,GAAIA,EACJQ,GAAIA,EACJC,GAAIA,EACJE,GAAIA,EACJE,GAAIA,EACJG,GAAIA,EACJE,GAAIA,EACJE,GAAIA,EACJC,GAAIA,EACJC,GAAIA,MAKRY,GAAmB,EACnBC,EAAkB,GACtBxC,EAAOyC,eAAgB,G,iCC5GvB,yHAAy5B,eAAG,G,oHCwN55B,EACA,E,wWAAA,EACA,CACAC,gBACAC,oBACA5C,YACA6C,cACAC,gBAEAC,OACAC,YACAC,cACAC,uCACAC,WAEAC,KACAH,cACAC,YAEAG,qBACAJ,cACAC,WAEAI,gBACAL,cACAC,YAEAK,QACAN,cACAC,YAEAM,UACAP,eACAC,YAEAO,UACAR,eACAC,YAEAzB,cACAwB,eACAC,WACAC,iBAEAO,mBACAT,qBACAC,YAEAS,aACAV,eACAC,WACAC,eAEAS,uBACAX,eACAC,YAEAW,mBACAZ,eACAC,YAEAY,cACAb,eACAC,aAGAd,gBACA,OACA2B,gBACArD,YACAwB,YACA8B,aACAC,iBACAtD,gBACAuD,mBACAC,eACAC,cACAC,WACA5D,gBACA6D,gBACAC,gBACAhD,aACAF,UACAmD,YAGAC,UACAC,uBACA,gFAEA7D,qBACA,OAAA8D,QAIA,OAHA,oBACAC,GAAAD,6BAEA,GAEA3D,uBACA,OACA2D,OACAE,QACAC,cACA,sBACA,wBAUA,OARA,oBACAF,GACA,qCACA,sCACAE,iCACA,uCAGA,GAEA5D,uBACA,OAAAyD,OAAAE,QAAA,8CASA,OARA,oBACAD,GACA,qCACA,sCACA,wBACAE,gBAGA,IAGAC,0BAUAC,mBACA,0DACAC,wBACA,mDAEAC,SACA9D,2BACA,uBACA,mBAEA,wDAEA+D,2BACA,gCACA,gCAEAC,qBACAC,+BAGAC,oBACAC,qBAEAC,oBACAH,2BAEA,sBACA,mBAIA,kBACA,qBAEA,qCACA,qBAGArD,4BACAuD,qBAGAE,0BACA,4BACA,qCACA,uBAEAC,uBAAA,wEACAL,wBACA,GACAM,gBAEAC,yBACA,kBACA,gBACA,IAEAC,8BACAF,iBAEAG,sBACAP,oBACA,6BACA,cACA,uBAEA,oBAGAQ,0BACAR,oBACA,iBACAI,iBAEAK,sBACAT,oBACA,yBACA,gBACA,uBAEAU,uBACAV,oBACA,0BACA,gBACA,uBAGAW,gBACA,gBACA,0CAGAC,iBACA,gBACA,2CAGAC,iBACA,gBACA,2CAEAC,uBACA,2CACA,mBACA,iBACA,mCAEAC,uBACA,2BACA,2BAEA,0BAEA,YAOA,GAHA,eAGA,yBAIA,OAHA,wBACA,4CACA,sBAKA,4BAEA,oBACA,gDAIAC,uBACAhB,oBACA,mBACA,qBACA,qCAEA,qBACA,wCAGAiB,2BACA,gCACA,oBAIA,c,6DCzfA,yHAAgsD,eAAG,G","file":"uni_modules/a-video-player/components/a-video-player/a-video-player.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./a-video-player.nvue?vue&type=template&id=04d6a82d&scoped=true&\"\nvar renderjs\nimport script from \"./a-video-player.nvue?vue&type=script&lang=js&\"\nexport * from \"./a-video-player.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./a-video-player.nvue?vue&type=style&index=0&id=04d6a82d&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04d6a82d\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/a-video-player/components/a-video-player/a-video-player.nvue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./a-video-player.nvue?vue&type=template&id=04d6a82d&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var s0 =\n    _vm.isFullScreen &&\n    _vm.isLocked &&\n    _vm.isFullScreen &&\n    _vm.isLocked &&\n    _vm.controlsShow\n      ? _vm.__get_style([_vm.lockStyle])\n      : null\n  var s1 =\n    _vm.isFullScreen &&\n    !_vm.isLocked &&\n    _vm.isFullScreen &&\n    !_vm.isLocked &&\n    _vm.controlsShow\n      ? _vm.__get_style([_vm.lockStyle])\n      : null\n  var s2 =\n    _vm.isFullScreen &&\n    !_vm.isLocked &&\n    _vm.isFullScreen &&\n    !_vm.isLocked &&\n    _vm.controlsShow\n      ? _vm.__get_style([_vm.headerStyle])\n      : null\n  var s3 =\n    _vm.isFullScreen &&\n    !_vm.isLocked &&\n    _vm.isFullScreen &&\n    !_vm.isLocked &&\n    _vm.controlsShow\n      ? _vm.__get_style([_vm.footerStyle])\n      : null\n  var m0 =\n    _vm.isFullScreen &&\n    !_vm.isLocked &&\n    _vm.isFullScreen &&\n    !_vm.isLocked &&\n    _vm.controlsShow\n      ? _vm.secondToMinute(_vm.current)\n      : null\n  var m1 =\n    _vm.isFullScreen &&\n    !_vm.isLocked &&\n    _vm.isFullScreen &&\n    !_vm.isLocked &&\n    _vm.controlsShow\n      ? _vm.secondToMinute(_vm.duration)\n      : null\n  var s4 =\n    !_vm.isFullScreen &&\n    !_vm.isFullScreen &&\n    _vm.controlsShow &&\n    _vm.showPlayRate\n      ? _vm.__get_style([_vm.headerStyle])\n      : null\n  var s5 =\n    !_vm.isFullScreen &&\n    !_vm.isFullScreen &&\n    _vm.controlsShow &&\n    _vm.showPlayRate\n      ? _vm.__get_style([_vm.headerStyle])\n      : null\n  var m2 =\n    !_vm.isFullScreen &&\n    !_vm.isFullScreen &&\n    _vm.controlsShow &&\n    _vm.showPlayRate\n      ? _vm.secondToMinute(_vm.current)\n      : null\n  var m3 =\n    !_vm.isFullScreen &&\n    !_vm.isFullScreen &&\n    _vm.controlsShow &&\n    _vm.showPlayRate\n      ? _vm.secondToMinute(_vm.duration)\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      $event.stopPropagation()\n      $event.preventDefault()\n      _vm.rateShow = true\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        s0: s0,\n        s1: s1,\n        s2: s2,\n        s3: s3,\n        m0: m0,\n        m1: m1,\n        s4: s4,\n        s5: s5,\n        m2: m2,\n        m3: m3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./a-video-player.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./a-video-player.nvue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"video-wrap\">\r\n    <video\r\n      id=\"myVideo111\"\r\n      ref=\"myVideo111\"\r\n      class=\"video\"\r\n      :controls=\"false\"\r\n      :src=\"src\"\r\n      :autoplay=\"autoplay\"\r\n      :show-center-play-btn=\"showCenterPlayBtn\"\r\n      @controlstoggle=\"controlstoggle\"\r\n      @timeupdate=\"timeupdate\"\r\n      @play=\"play\"\r\n      @pause=\"pause\"\r\n      @ended=\"ended\"\r\n      @progress=\"progress\"\r\n      @loadedmetadata=\"loadedmetadata\"\r\n    >\r\n      <!-- 全屏 -->\r\n\r\n      <!-- 锁屏状态 -->\r\n      <ComCoverView class=\"\" v-if=\"isFullScreen && isLocked\">\r\n        <view class=\"video-content-box\" v-if=\"isFullScreen && isLocked\" @tap=\"onclick\">\r\n          <view @tap.stop.prevent=\"lockClick\" v-if=\"controlsShow\" class=\"lock\" :style=\"[lockStyle]\">\r\n            <text class=\"iconfont\">&#xe621;</text>\r\n          </view>\r\n        </view>\r\n      </ComCoverView>\r\n\r\n      <!-- 解锁屏状态 -->\r\n      <ComCoverView v-if=\"isFullScreen && !isLocked\">\r\n        <view class=\"video-content-box\" v-if=\"isFullScreen && !isLocked\" @tap=\"onclick\">\r\n          <!-- 锁 icon -->\r\n          <view\r\n            @tap.stop.prevent=\"lockClick\"\r\n            v-if=\"controlsShow\"\r\n            class=\"lock\"\r\n            @tap=\"onclick\"\r\n            :style=\"[lockStyle]\"\r\n          >\r\n            <text class=\"iconfont\">&#xe62a;</text>\r\n          </view>\r\n\r\n          <!-- 头部 -->\r\n          <view class=\"video-control-header\" v-if=\"controlsShow\" :style=\"[headerStyle]\">\r\n            <view class=\"back\">\r\n              <view @tap.stop.prevent=\"fullScreen\"><text class=\"iconfont\">&#xe600;</text></view>\r\n              <view class=\"back-text\">{{videoTitle}}</view>\r\n            </view>\r\n\r\n            <view class=\"header-right\">\r\n              <view @tap.stop.prevent=\"collect\" class=\"mr-10\">\r\n                <text v-if=\"isCollect\" class=\"iconfont\">&#xe65b;</text>\r\n                <text v-else class=\"iconfont\">&#xe65a;</text>\r\n              </view>\r\n\r\n              <view @tap.stop.prevent=\"collect\" class=\"mr-10\">\r\n                <text class=\"iconfont ml-30\">&#xe626;</text>\r\n              </view>\r\n              <view @tap.stop.prevent=\"collect\" class=\"mr-10\">\r\n                <text class=\"iconfont ml-30\">&#xe624;</text>\r\n              </view>\r\n            </view>\r\n          </view>\r\n\r\n          <view\r\n            class=\"video-control-footer video-control-footer-fullscreen\"\r\n            v-if=\"controlsShow\"\r\n            :style=\"[footerStyle]\"\r\n          >\r\n            <view class=\"flex-row-sb\">\r\n              <text class=\"c-white time\">{{ secondToMinute(current) }}</text>\r\n              <VideoSlider\r\n                :max=\"duration\"\r\n                :value=\"current\"\r\n                :width=\"sliderWidth\"\r\n                :safePadding=\"safePadding\"\r\n                @touchStart=\"preventHideControl\"\r\n                @change=\"changeCurrent\"\r\n                :backgroundColor=\"color\"\r\n                :blockColor=\"color\"\r\n                :isFullScreen=\"isFullScreen\"\r\n              ></VideoSlider>\r\n              <text class=\"c-white time\">{{ secondToMinute(duration) }}</text>\r\n            </view>\r\n\r\n            <view class=\"flex-row-sb flex-1\">\r\n              <view class=\"flex-row-sb\">\r\n                <!-- 播放/暂停 -->\r\n                <view v-if=\"playing\" class=\"plr-10\" @tap.stop=\"pauseVideo\">\r\n                  <text class=\"iconfont\">&#xe633;</text>\r\n                </view>\r\n                <view v-else class=\"plr-10\" @tap.stop=\"playVideo\">\r\n                  <text class=\"iconfont\">&#xe623;</text>\r\n                </view>\r\n                <view v-if=\"showBarrage\" class=\"flex-row-sb\">\r\n                  <!-- 弹幕开启状态 -->\r\n                  <view v-if=\"isOpenBarrage\" class=\"plr-10\">\r\n                    <text class=\"iconfont\">&#xe60a;</text>\r\n                  </view>\r\n                  <view v-else class=\"plr-10\"><text class=\"iconfont\">&#xe609;</text></view>\r\n                  <!-- 弹幕设置 -->\r\n                  <view class=\"plr-10\"><text class=\"iconfont\">&#xe608;</text></view>\r\n                </view>\r\n              </view>\r\n\r\n              <view class=\"flex-1 plr-10\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"input\"\r\n                  value=\"\"\r\n                  placeholder=\"输入弹幕\"\r\n                  placeholder-style=\"color:#555;\"\r\n                />\r\n              </view>\r\n\r\n              <view class=\"flex-row-sb\">\r\n                <view class=\"plr-10\" @tap.stop.prevent=\"rateShow = true\">\r\n                  <text class=\"c-white font-size\">字幕</text>\r\n                </view>\r\n                <view class=\"plr-10\" @tap.stop.prevent=\"rateShowClick\" v-if=\"showPlayRate\">\r\n                  <text class=\"c-white font-size\">倍数</text>\r\n                </view>\r\n                <!-- 下载 -->\r\n                <view @tap.stop.prevent=\"fullScreen\" class=\"plr-10\" v-if=\"showDownload\">\r\n                  <text class=\"iconfont\">&#xe629;</text>\r\n                </view>\r\n                <!-- 全屏 -->\r\n                <!-- <view @tap.stop.prevent=\"fullScreen\" class=\"plr-10\"><text class=\"iconfont\">&#xe62b;</text></view> -->\r\n              </view>\r\n            </view>\r\n          </view>\r\n\r\n          <!-- 弹出功能区 -->\r\n\r\n          <!-- 倍速播放 -->\r\n          <view class=\"play-rate-list rate\" :class=\"{ 'rate-show': rateShow }\">\r\n            <view\r\n              v-for=\"(item, index) in ['0.5', '0.8', '1.0', '1.25', '1.5']\"\r\n              :key=\"index\"\r\n              class=\"play-rate-item rate\"\r\n              :data-rate=\"item\"\r\n              @tap=\"switchRate\"\r\n            >\r\n              <text\r\n                class=\"c-white rate-text\"\r\n                :class=\"{\r\n                  'rate-active': item == currentRate,\r\n                  'rate-text-full-screen': isFullScreen\r\n                }\"\r\n              >\r\n                {{ item }}\r\n              </text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </ComCoverView>\r\n\r\n      <!-- 小屏时 -->\r\n      <ComCoverView class=\"\" v-if=\"!isFullScreen\">\r\n        <view class=\"video-content-box\" v-if=\"!isFullScreen\" @tap.stop.prevent=\"onclick\">\r\n          <view\r\n            class=\"video-control-header\"\r\n            v-if=\"controlsShow && showPlayRate\"\r\n            :style=\"[headerStyle]\"\r\n          >\r\n            <!-- 返回 -->\r\n            <view class=\"back\" @tap.stop.prevent=\"fullScreen\">\r\n              <text class=\"iconfont\">&#xe600;</text>\r\n            </view>\r\n            <view class=\"header-right\">\r\n              <view v-if=\"isCollect\" @tap.stop.prevent=\"collect\">\r\n                <text class=\"iconfont\">&#xe65b;</text>\r\n              </view>\r\n              <view v-else @tap.stop.prevent=\"collect\"><text class=\"iconfont\">&#xe65a;</text></view>\r\n              <view @tap.stop.prevent=\"collect\"><text class=\"iconfont ml-30\">&#xe626;</text></view>\r\n              <view @tap.stop.prevent=\"collect\"><text class=\"iconfont ml-30\">&#xe624;</text></view>\r\n            </view>\r\n          </view>\r\n          <view\r\n            class=\"video-control-footer\"\r\n            v-if=\"controlsShow && showPlayRate\"\r\n            :style=\"[headerStyle]\"\r\n          >\r\n            <!-- 播放/暂停 -->\r\n            <view v-if=\"playing\" @tap.stop.prevent=\"pauseVideo\">\r\n              <text class=\"iconfont\">&#xe633;</text>\r\n            </view>\r\n            <view v-else @tap.stop.prevent=\"playVideo\"><text class=\"iconfont\">&#xe623;</text></view>\r\n            <!-- <text class=\"sm-title\">{{ currentDuration }}/{{ lastDuration }}</text> -->\r\n            <!-- 进度条 -->\r\n            <text class=\"c-white time\">{{ secondToMinute(current) }}</text>\r\n            <VideoSlider\r\n              :max=\"duration\"\r\n              :value=\"current\"\r\n              :width=\"sliderWidth\"\r\n              @touchStart=\"preventHideControl\"\r\n              @change=\"changeCurrent\"\r\n              :backgroundColor=\"color\"\r\n              :blockColor=\"color\"\r\n              :isFullScreen=\"isFullScreen\"\r\n            ></VideoSlider>\r\n            <text class=\"c-white time\">{{ secondToMinute(duration) }}</text>\r\n            <!-- 全屏 -->\r\n            <view @tap.stop.prevent=\"fullScreen\"><text class=\"iconfont mr-10\">&#xe62b;</text></view>\r\n          </view>\r\n        </view>\r\n      </ComCoverView>\r\n    </video>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport VideoSlider from './components/video-slider/video-slider.nvue'\r\nimport ComCoverView from './components/com-cover-view/com-cover-view.vue'\r\n\r\nlet timer\r\nlet systemInfo\r\nexport default {\r\n  emits: ['click'],\r\n  name: 'FVideoPlayer',\r\n  components: {\r\n    VideoSlider,\r\n    ComCoverView\r\n  },\r\n  props: {\r\n    videoTitle: {\r\n      type: [String],\r\n      default: '标题视频标题视频标题视频标题标题视频标题视频标题视频标题',\r\n      desc: '标题'\r\n    },\r\n    src: {\r\n      type: [String],\r\n      default: ''\r\n    },\r\n    historyPlayPosition: {\r\n      type: [Number],\r\n      default: 0\r\n    },\r\n    xWebkitAirplay: {\r\n      type: [String],\r\n      default: ''\r\n    },\r\n    poster: {\r\n      type: [String],\r\n      default: ''\r\n    },\r\n    autoplay: {\r\n      type: [Boolean],\r\n      default: false\r\n    },\r\n    controls: {\r\n      type: [Boolean],\r\n      default: true\r\n    },\r\n    showPlayRate: {\r\n      type: [Boolean],\r\n      default: true,\r\n      desc: '全屏是否显示倍数'\r\n    },\r\n    fullScreenPadding: {\r\n      type: [Number, String],\r\n      default: 40\r\n    },\r\n    showBarrage: {\r\n      type: [Boolean],\r\n      default: true,\r\n      desc: '弹幕是否开启'\r\n    },\r\n    enableProgressGesture: {\r\n      type: [Boolean],\r\n      default: true\r\n    },\r\n    showCenterPlayBtn: {\r\n      type: [Boolean],\r\n      default: false\r\n    },\r\n    showDownload: {\r\n      type: [Boolean],\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      videoContext: '',\r\n      isLocked: false,\r\n      rateShow: false,\r\n      isCollect: false,\r\n      isOpenBarrage: false,\r\n      controlsShow: true,\r\n      videoCurrentTime: 0,\r\n      videoPreTime: 0,\r\n      currentRate: 1,\r\n      playing: false,\r\n      isFullScreen: false,\r\n      color: '#ffffff',\r\n      sliderWidth: 200,\r\n      duration: 100,\r\n      current: 0,\r\n      padding: 0\r\n    }\r\n  },\r\n  computed: {\r\n    safePadding() {\r\n      return this.fullScreenPadding > this.padding ? this.fullScreenPadding : this.padding\r\n    },\r\n    lockStyle() {\r\n      let style = { left: 0 }\r\n      if (this.isFullScreen) {\r\n        style = { left: this.safePadding + 'px' }\r\n      }\r\n      return style\r\n    },\r\n    headerStyle() {\r\n      let style = {\r\n        left: 0,\r\n        right: 0,\r\n        height: '45px',\r\n        'padding-left': '10px',\r\n        'padding-right': '10px'\r\n      }\r\n      if (this.isFullScreen) {\r\n        style = {\r\n          'padding-left': this.safePadding + 'px',\r\n          'padding-right': this.safePadding + 'px',\r\n          height: 45 + systemInfo.statusBarHeight + 'px',\r\n          'padding-top': systemInfo.statusBarHeight + 'px'\r\n        }\r\n      }\r\n      return style\r\n    },\r\n    footerStyle() {\r\n      let style = { left: 0, right: 0, 'padding-left': '10px', 'padding-right': '10px' }\r\n      if (this.isFullScreen) {\r\n        style = {\r\n          'padding-left': this.safePadding + 'px',\r\n          'padding-right': this.safePadding + 'px',\r\n          'padding-bottom': '40px',\r\n          height: '80px'\r\n        }\r\n      }\r\n      return style\r\n    }\r\n  },\r\n  beforeCreate() {\r\n    // #ifdef APP-NVUE\r\n    let domModule = weex.requireModule('dom')\r\n    domModule.addRule('fontFace', {\r\n      fontFamily: 'fvideoplayicon',\r\n      // src: \"url('local://fvideoplayicon.ttf')\",\r\n      src: \"url('https://at.alicdn.com/t/c/font_3930558_la1ub4ar8w.ttf?t=1677858846586')\"\r\n    })\r\n    // #endif\r\n  },\r\n  mounted() {\r\n    this.videoContext = uni.createVideoContext('myVideo111', this)\r\n    systemInfo = uni.getSystemInfoSync()\r\n    this.padding = (systemInfo.screenHeight - systemInfo.safeArea.height) / 2\r\n  },\r\n  methods: {\r\n    secondToMinute(second) {\r\n      let sec = Math.floor(second % 60)\r\n      let minute = Math.floor(second / 60)\r\n\r\n      return `${minute < 10 ? '0' + minute : minute}:${sec < 10 ? '0' + sec : sec}`\r\n    },\r\n    loadedmetadata(event) {\r\n      this.duration = event.target.duration\r\n      this.$emit('loadedmetadata', event)\r\n    },\r\n    progress(event) {\r\n      console.log('==== event :', event)\r\n      // event.target.buffered\r\n    },\r\n    collect(e) {\r\n      e.stopPropagation()\r\n    },\r\n    onclick(e) {\r\n      console.log('onclick: ', e)\r\n\r\n      if (e.currentTarget.event) {\r\n        this.hideControl()\r\n        return\r\n      }\r\n\r\n      if (this.controlsShow) {\r\n        this.hideControl(0)\r\n      } else {\r\n        this.controlsShow = !this.controlsShow\r\n        this.hideControl()\r\n      }\r\n    },\r\n    stopPropagation(e) {\r\n      e.stopPropagation()\r\n    },\r\n    //拖动滑块\r\n    changeCurrent(e) {\r\n      this.current = e.detail.value\r\n      this.videoContext.seek(this.current)\r\n      this.hideControl(3000)\r\n    },\r\n    hideControl(time = 5000) {\r\n      console.log('time: ', time)\r\n      if (timer) {\r\n        clearTimeout(timer)\r\n      }\r\n      timer = setTimeout(() => {\r\n        this.controlsShow = false\r\n        this.rateShow = false\r\n      }, time)\r\n    },\r\n    preventHideControl() {\r\n      clearTimeout(timer)\r\n    },\r\n    lockClick(e) {\r\n      e.stopPropagation()\r\n      this.isLocked = !this.isLocked\r\n      if (this.isLocked) {\r\n        this.hideControl(1500)\r\n      } else {\r\n        this.hideControl()\r\n      }\r\n    },\r\n    rateShowClick(e) {\r\n      e.stopPropagation()\r\n      this.rateShow = true\r\n      clearTimeout(timer)\r\n    },\r\n    playVideo(e) {\r\n      e.stopPropagation()\r\n      this.videoContext.play()\r\n      this.playing = true\r\n      this.hideControl(3000)\r\n    },\r\n    pauseVideo(e) {\r\n      e.stopPropagation()\r\n      this.videoContext.pause()\r\n      this.playing = false\r\n      this.hideControl(3000)\r\n    },\r\n    // 视频被播放\r\n    play() {\r\n      this.playing = true\r\n      this.$emit('play', this.videoCurrentTime)\r\n    },\r\n    // 视频播放结束\r\n    ended() {\r\n      this.playing = false\r\n      this.$emit('ended', this.videoCurrentTime)\r\n    },\r\n    // 暂停视频播放\r\n    pause() {\r\n      this.playing = false\r\n      this.$emit('pause', this.videoCurrentTime)\r\n    },\r\n    switchRate(e) {\r\n      let rate = Number(e.currentTarget.dataset.rate)\r\n      this.currentRate = rate\r\n      this.rateShow = false\r\n      this.videoContext.playbackRate(rate)\r\n    },\r\n    timeupdate(res) {\r\n      this.$emit('timeupdate', res)\r\n      let time = res.detail.currentTime\r\n\r\n      const timeDeff = time - this.videoCurrentTime\r\n      // 小于当前历史播放时间\r\n      if (timeDeff <= 0) {\r\n        return\r\n      }\r\n\r\n      this.current = time\r\n\r\n      // 拖拽时间超出当前时间  + 1currentRate秒 播放的内容\r\n      if (timeDeff > 0 && timeDeff <= this.currentRate) {\r\n        this.videoCurrentTime = time\r\n        this.$emit('historyMaxPlayPosition', time)\r\n        this.$emit('input', time)\r\n        return\r\n      }\r\n\r\n      // 能拖拽\r\n      if (this.enableProgressGesture) return\r\n      //  拖拽时间超出当前时间 过多 回到当前播放时间\r\n      if (timeDeff > this.currentRate) {\r\n        this.videoContext.seek(this.videoCurrentTime)\r\n        return\r\n      }\r\n    },\r\n    fullScreen(e) {\r\n      e.stopPropagation()\r\n      if (this.isFullScreen) {\r\n        this.isFullScreen = false\r\n        this.videoContext.exitFullScreen()\r\n      } else {\r\n        this.isFullScreen = true\r\n        this.videoContext.requestFullScreen()\r\n      }\r\n    },\r\n    controlstoggle(event) {\r\n      this.controlsShow = event.detail.show\r\n      this.rateShow = false\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n/* #ifndef APP-NVUE */\r\nview,\r\ncover-view {\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* #endif */\r\nview,\r\ncover-view {\r\n  box-sizing: border-box;\r\n}\r\n\r\n.flex-1 {\r\n  flex: 1;\r\n}\r\n\r\n.cover-view {\r\n  color: #fff;\r\n  flex: 1;\r\n  /* #ifndef APP-PLUS-NVUE */\r\n  display: flex;\r\n  height: 100%;\r\n  /* #endif*/\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 999;\r\n}\r\n\r\n.c-white {\r\n  color: white;\r\n}\r\n\r\n.time {\r\n  font-size: 24rpx;\r\n}\r\n\r\n.myVideo-slot-box {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.video-content-box {\r\n  color: #fff;\r\n  flex: 1;\r\n  /* #ifndef APP-PLUS-NVUE */\r\n  display: flex;\r\n  height: 100%;\r\n  /* #endif*/\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  z-index: 999;\r\n}\r\n\r\n.input {\r\n  background-color: #c4c4c4;\r\n  border-radius: 20rpx;\r\n  color: #222;\r\n  padding: 0 20rpx;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.lock {\r\n  position: absolute;\r\n  left: 20rpx;\r\n  padding: 10rpx;\r\n  border-radius: 50%;\r\n  background-color: rgba(1, 1, 1, 0.5);\r\n  opacity: 1;\r\n}\r\n\r\n.pause-play-btn {\r\n  width: 17rpx;\r\n  height: 17rpx;\r\n  padding: 17rpx;\r\n  background-position: 50% 50%;\r\n  background-repeat: no-repeat;\r\n  cursor: pointer;\r\n}\r\n\r\n/* #ifndef APP-PLUS-NVUE */\r\n@font-face {\r\n  font-family: 'fvideoplayicon';\r\n  src: url('fvideoplayicon.ttf') format('truetype');\r\n}\r\n\r\n/* #endif*/\r\n.iconfont {\r\n  color: #ffffff;\r\n  font-family: fvideoplayicon !important;\r\n  /* #ifndef APP-PLUS-NVUE */\r\n  font-family: 'fvideoplayicon' !important;\r\n  /* #endif*/\r\n  font-size: 46rpx;\r\n  font-style: normal;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\n.mr-10 {\r\n  margin-right: 10rpx;\r\n}\r\n\r\n.ml-30 {\r\n  margin-left: 30rpx;\r\n}\r\n\r\n.plr-10 {\r\n  padding-right: 10rpx;\r\n  padding-left: 10rpx;\r\n}\r\n\r\n.pr-20 {\r\n  padding-right: 20rpx;\r\n}\r\n\r\n.font-size {\r\n  font-size: 28rpx;\r\n}\r\n\r\n.video-wrap {\r\n  height: 400rpx;\r\n  position: relative;\r\n  /* #ifndef APP-NVUE */\r\n  display: flex;\r\n  /* #endif */\r\n  flex-direction: row;\r\n  flex: 1;\r\n}\r\n\r\n.video {\r\n  /* #ifndef APP-NVUE */\r\n  display: flex;\r\n  /* #endif */\r\n  flex-direction: row;\r\n  position: relative;\r\n  flex: 1;\r\n}\r\n\r\n.video-control-header {\r\n  /* #ifndef APP-NVUE */\r\n  display: flex;\r\n  overflow: hidden;\r\n  /* #endif */\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 90rpx;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: rgba(1, 1, 1, 0.5);\r\n}\r\n\r\n.header-right {\r\n  /* #ifndef APP-NVUE */\r\n  display: flex;\r\n  /* #endif */\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  width: 300rpx;\r\n  flex: 2;\r\n}\r\n\r\n.back {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: row;\r\n  /* #ifndef APP-NVUE */\r\n  word-break: break-all;\r\n\r\n  /* #endif */\r\n  .back-text {\r\n    color: #fff;\r\n    width: 200rpx;\r\n    overflow:hidden;\r\n    text-overflow:ellipsis;\r\n    white-space:nowrap;\r\n  }\r\n}\r\n\r\n.flex-row-sb {\r\n  /* #ifndef APP-NVUE */\r\n  display: flex;\r\n  /* #endif */\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.video-control-footer {\r\n  z-index: 99;\r\n  background-color: rgba(1, 1, 1, 0.5);\r\n  height: 90rpx;\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  /* #ifndef APP-NVUE */\r\n  display: flex;\r\n  /* #endif */\r\n  flex: 1;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  flex-direction: row;\r\n}\r\n\r\n.video-control-footer-fullscreen {\r\n  flex-direction: column;\r\n  height: 120rpx;\r\n  align-items: stretch;\r\n  justify-content: center;\r\n}\r\n\r\n.play-rate-list {\r\n  width: 0;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  position: absolute;\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  transition: width 0.3s ease;\r\n  background-color: rgba(0, 0, 0, 0.65);\r\n  z-index: 999;\r\n}\r\n\r\n.play-rate-item {\r\n  transition: color ease 0.3s;\r\n}\r\n\r\n.rate-text {\r\n  text-align: center;\r\n}\r\n\r\n.rate-text-full-screen {\r\n  line-height: 80rpx;\r\n}\r\n\r\n.rate-show {\r\n  width: 300rpx;\r\n}\r\n\r\n.rate-active {\r\n  color: #00d8ff;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./a-video-player.nvue?vue&type=style&index=0&id=04d6a82d&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./a-video-player.nvue?vue&type=style&index=0&id=04d6a82d&scoped=true&lang=scss&\""],"sourceRoot":""}