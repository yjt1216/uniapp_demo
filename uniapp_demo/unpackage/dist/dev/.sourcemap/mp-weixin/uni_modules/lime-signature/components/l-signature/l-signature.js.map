{"version":3,"sources":["webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/uni_modules/lime-signature/components/l-signature/l-signature.vue?25f6","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/uni_modules/lime-signature/components/l-signature/l-signature.vue?faac","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/uni_modules/lime-signature/components/l-signature/l-signature.vue?f340","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/uni_modules/lime-signature/components/l-signature/l-signature.vue?8d63","uni-app:///uni_modules/lime-signature/components/l-signature/l-signature.vue","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/uni_modules/lime-signature/components/l-signature/l-signature.vue?3770","webpack:////Users/wangyunzhu/Desktop/yinjiangtao/uniapp/uniapp_demo/uniapp_demo/uni_modules/lime-signature/components/l-signature/l-signature.vue?4fe9"],"names":["props","data","canvasWidth","canvasHeight","useCanvas2d","show","offscreenStyles","computed","canvasId","offscreenId","offscreenSize","canvasStyle","backgroundColor","width","height","background","param","penSize","landscape","openSmooth","minLineWidth","maxLineWidth","minSpeed","maxWidthDiffRate","maxHistoryLength","disableScroll","penColor","created","mounted","config","immediate","beforeDestroy","methods","undo","clear","isEmpty","canvasToTempFilePath","canvas","context","success","tempFilePath","fail","getContext","type","left","top","right","pixelRatio","createImage","toDataURL","requestAnimationFrame","touchStart","touchMove","touchEnd"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwR;AACxR;AAC+D;AACL;AACc;;;AAGxE;AAC4N;AAC5N,gBAAgB,iNAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sPAAM;AACR,EAAE,+PAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0PAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAq4B,CAAgB,yyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;AC8Ez5B;AACA;AAEA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAHA;AAAA,eAKA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;IAUA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QAAAP;MACA;IACA;IACAQ;MACA;QAAAR;QAAAS;MACA;QACAC;QACAC;QACAC;MACA;IACA;IACAC;MACA;QAAAC;QAAAL;QAAAM;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;MACA;QAAAC;QAAAT;QAAAL;QAAAM;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;MAAA;IACA;EACA;EASAE;IACA;EACA;EAGAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,KACA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA,OAEA;YAAA;cAAAC;cACA;cACA;cACA;cACA;cAEA;gBACA;cACA;gBAAAC;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EAYAC;IACA;IACA;IACA;IACA;EACA;EAGAC;IAyCAC;MAQA,oBACA;IAEA;IACAC;MAQA,oBACA;IAEA;IACAC;MAQA;IAEA;IACAC;MAAA;MACA;MAqBA;QAAA;MAAA;MACA;QAAA;MAAA;MACA;QAAAC;MACA;QAAAnB;MACA;MACA;MAEA;QACA;QACAoB;QACAA;QACA;UACAA;UACAA;QACA;QACA;UACAA;UACAA;QACA;QACAA;QAEAA;UACA;YACA;YACAA;YACAA;YACAC;cAAAC;cAAAL;YAAA;UACA;QACA;MACA;MAEA;QACA;UAEA;QAWA;UAAAM;QAAA;MACA;QACA;MACA;IAEA;IAEAC;MAAA;MACA;QAAAJ;QAAAK;MAAA;QACA;UACA;YAAA7B;YAAAuB;YAAAO;YAAAC;YAAAC;UACA;YAAAC;UACA;UACA;YACAT;YACAD;YACAA;UACA;YACAU;YACAT;YACAD;cACAW;cACAC;gBAAA;cAAA;cACAC;YACA;UACA;UACA;UACAZ;UACA;YAAAM;YAAAC;YAAAC;YAAAjC;YAAAC;YAAAwB;YAAAD;YAAAU;UAAA;QACA;MACA;IACA;IACAI;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;AC9WA;AAAA;AAAA;AAAA;AAAopD,CAAgB,w6CAAG,EAAC,C;;;;;;;;;;;ACAxqD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uni_modules/lime-signature/components/l-signature/l-signature.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./l-signature.vue?vue&type=template&id=2bad5a20&filter-modules=eyJzaWduIjp7InR5cGUiOiJyZW5kZXJqcyIsImNvbnRlbnQiOiIiLCJzdGFydCI6MTcyOSwiYXR0cnMiOnsibW9kdWxlIjoic2lnbiIsImxhbmciOiJqcyJ9LCJlbmQiOjE3NjZ9fQ%3D%3D&\"\nvar renderjs\nimport script from \"./l-signature.vue?vue&type=script&lang=js&\"\nexport * from \"./l-signature.vue?vue&type=script&lang=js&\"\nimport style0 from \"./l-signature.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/lime-signature/components/l-signature/l-signature.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./l-signature.vue?vue&type=template&id=2bad5a20&filter-modules=eyJzaWduIjp7InR5cGUiOiJyZW5kZXJqcyIsImNvbnRlbnQiOiIiLCJzdGFydCI6MTcyOSwiYXR0cnMiOnsibW9kdWxlIjoic2lnbiIsImxhbmciOiJqcyJ9LCJlbmQiOjE3NjZ9fQ%3D%3D&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var s0 = _vm.show ? _vm.__get_style([_vm.canvasStyle, _vm.styles]) : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        s0: s0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./l-signature.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./l-signature.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"lime-signature\" v-if=\"show\" :style=\"[canvasStyle, styles]\" ref=\"limeSignature\">\r\n\t\t<!-- #ifndef APP-VUE || APP-NVUE -->\r\n\t\t<canvas \r\n\t\tv-if=\"useCanvas2d\"\r\n\t\tclass=\"lime-signature__canvas\"\r\n\t\t:id=\"canvasId\" \r\n\t\ttype=\"2d\"\r\n\t\t:disableScroll=\"disableScroll\"\r\n\t\t@touchstart=\"touchStart\"\r\n\t\t@touchmove=\"touchMove\"\r\n\t\t@touchend=\"touchEnd\"\r\n\t\t></canvas>\r\n\t\t<canvas \r\n\t\tv-else\r\n\t\t:disableScroll=\"disableScroll\"\r\n\t\tclass=\"lime-signature__canvas\"\r\n\t\t:canvas-id=\"canvasId\" \r\n\t\t:id=\"canvasId\"\r\n\t\t:width=\"canvasWidth\"\r\n\t\t:height=\"canvasHeight\"\r\n\t\t@touchstart=\"touchStart\"\r\n\t\t@touchmove=\"touchMove\"\r\n\t\t@touchend=\"touchEnd\"\r\n\t\t@mousedown=\"touchStart\"\r\n\t\t@mousemove=\"touchMove\"\r\n\t\t@mouseup=\"touchEnd\"\r\n\t\t></canvas>\r\n\t\t<canvas \r\n\t\t\tclass=\"offscreen\" \r\n\t\t\tcanvas-id=\"offscreen\" \r\n\t\t\tid=\"offscreen\" \r\n\t\t\t:style=\"'width:' + offscreenSize[0] + 'px;height:' + offscreenSize[1] + 'px'\" \r\n\t\t\t:width=\"offscreenSize[0]\" \r\n\t\t\t:height=\"offscreenSize[1]\">\r\n\t\t</canvas>\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifdef APP-VUE -->\r\n\t\t<view \r\n\t\t:id=\"canvasId\"\r\n\t\t:disableScroll=\"disableScroll\"\r\n\t\t:rparam=\"param\"\r\n\t\t:change:rparam=\"sign.update\"\r\n\t\t\r\n\t\t:rclear=\"rclear\"\r\n\t\t:change:rclear=\"sign.clear\"\r\n\t\t\r\n\t\t:rundo=\"rundo\"\r\n\t\t:change:rundo=\"sign.undo\"\r\n\t\t\r\n\t\t:rsave=\"rsave\"\r\n\t\t:change:rsave=\"sign.save\"\r\n\t\t\r\n\t\t:rempty=\"rempty\"\r\n\t\t:change:rempty=\"sign.isEmpty\"\r\n\t\t\r\n\t\t></view>\t\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifdef APP-NVUE -->\r\n\t\t<web-view \r\n\t\tsrc=\"/uni_modules/lime-signature/hybrid/html/index.html\"\r\n\t\tclass=\"lime-signature__canvas\"\r\n\t\tref=\"webview\"\r\n\t\t@pagefinish=\"onPageFinish\"\r\n\t\t@error=\"onError\"\r\n\t\t@onPostMessage=\"onMessage\"\r\n\t\t></web-view>\r\n\t\t<!-- #endif -->\r\n\t</view>\r\n</template>\r\n<!-- #ifdef APP-VUE -->\r\n<script module=\"sign\" lang=\"renderjs\">\r\nexport {default}  from './render'\r\n</script>\t\t\r\n<!-- #endif -->\r\n\r\n<script>\r\n\t// #ifndef APP-NVUE\r\n\timport {canIUseCanvas2d, wrapEvent, requestAnimationFrame, sleep} from './utils'\r\n\timport {Signature} from './signature'\r\n\t// import {Signature} from '@signature';\r\n\timport {uniContext, createImage, toDataURL} from './context'\r\n\t// #endif\r\n\timport props from './props';\r\n\timport {base64ToPath, getRect} from './utils'\r\n\texport default {\r\n\t\tprops,\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcanvasWidth: null,\r\n\t\t\t\tcanvasHeight: null,\r\n\t\t\t\tuseCanvas2d: true,\r\n\t\t\t\tshow: true,\r\n\t\t\t\toffscreenStyles: '',\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\trclear: 0,\r\n\t\t\t\trundo: 0,\r\n\t\t\t\trsave: 0,\r\n\t\t\t\trempty: 0,\r\n\t\t\t\trisEmpty: true,\r\n\t\t\t\ttoDataURL: null,\r\n\t\t\t\ttempFilePath: [],\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tcanvasId() {\r\n\t\t\t\treturn `lime-signature${this._uid||this._.uid}`\r\n\t\t\t},\r\n\t\t\toffscreenId() {\r\n\t\t\t\treturn this.canvasId + 'offscreen'\r\n\t\t\t},\r\n\t\t\toffscreenSize() {\r\n\t\t\t\tconst {canvasWidth, canvasHeight} = this\r\n\t\t\t\treturn this.landscape ? [canvasHeight, canvasWidth] : [canvasWidth, canvasHeight]\r\n\t\t\t},\r\n\t\t\tcanvasStyle() {\r\n\t\t\t\tconst {canvasWidth, canvasHeight, backgroundColor} = this\r\n\t\t\t\treturn {\r\n\t\t\t\t\twidth: canvasWidth && (canvasWidth + 'px'),\r\n\t\t\t\t\theight: canvasHeight && (canvasHeight + 'px'),\r\n\t\t\t\t\tbackground: backgroundColor\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tparam() {\r\n\t\t\t\tconst {penColor, penSize, backgroundColor, landscape, openSmooth, minLineWidth, maxLineWidth, minSpeed, maxWidthDiffRate, maxHistoryLength, disableScroll} = this\r\n\t\t\t\treturn JSON.parse(JSON.stringify({penColor, penSize, backgroundColor, landscape, openSmooth, minLineWidth, maxLineWidth, minSpeed, maxWidthDiffRate, maxHistoryLength, disableScroll}))\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #ifdef APP-NVUE\r\n\t\twatch: {\r\n\t\t\tparam(v) {\r\n\t\t\t\tthis.$refs.webview.evalJS(`update(${JSON.stringify(v)})`)\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #ifndef APP-PLUS\r\n\t\tcreated() {\r\n\t\t\tthis.useCanvas2d = this.type == '2d' && canIUseCanvas2d()\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #ifndef APP-PLUS\r\n\t\tasync mounted() {\r\n\t\t\tif(this.beforeDelay) {\r\n\t\t\t\tawait sleep(this.beforeDelay)\r\n\t\t\t}\r\n\t\t\tconst config = await this.getContext()\r\n\t\t\tthis.signature = new Signature(config)\r\n\t\t\tthis.canvasEl =  this.signature.canvas.get('el')\r\n\t\t\tthis.canvasWidth = this.signature.canvas.get('width')\r\n\t\t\tthis.canvasHeight = this.signature.canvas.get('height')\r\n\t\t\t\r\n\t\t\tthis.stopWatch = this.$watch('param' , (v) => {\r\n\t\t\t\tthis.signature.pen.setOption(v)\r\n\t\t\t}, {immediate: true})\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #ifndef APP-PLUS\r\n\t\t// #ifdef VUE3\r\n\t\tbeforeUnmount() {\r\n\t\t\tthis.stopWatch && this.stopWatch()\r\n\t\t\tthis.signature.destroy()\r\n\t\t\tthis.signature = null\r\n\t\t\tthis.show = false;\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #ifdef VUE2\r\n\t\tbeforeDestroy() {\r\n\t\t\tthis.stopWatch && this.stopWatch()\r\n\t\t\tthis.signature.destroy()\r\n\t\t\tthis.show = false;\r\n\t\t\tthis.signature = null\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #endif\r\n\t\tmethods: {\r\n\t\t\t// #ifdef MP-QQ\r\n\t\t\t// toJSON() { return this },\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tonPageFinish() {\r\n\t\t\t\tthis.$refs.webview.evalJS(`update(${JSON.stringify(this.param)})`)\r\n\t\t\t},\r\n\t\t\tonMessage(e = {}) {\r\n\t\t\t\tconst {detail: {data: [res]}} = e\r\n\t\t\t\tif(res.event?.save) {\r\n\t\t\t\t\t this.toDataURL = res.event.save\r\n\t\t\t\t}\r\n\t\t\t\tif(res.event?.changeSize) {\r\n\t\t\t\t\tconst {width, height} = res.event.changeSize\r\n\t\t\t\t}\r\n\t\t\t\tif(res.event.hasOwnProperty('isEmpty')) {\r\n\t\t\t\t\tthis.risEmpty = res.event.isEmpty\r\n\t\t\t\t}\r\n\t\t\t\tif (res.event?.file) {\r\n\t\t\t\t\tthis.tempFilePath.push(res.event.file)\r\n\t\t\t\t\tif (this.tempFilePath.length > 7) {\r\n\t\t\t\t\t\tthis.tempFilePath.shift()\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (res.event?.success) {\r\n\t\t\t\t\tif (res.event.success) {\r\n\t\t\t\t\t\tthis.tempFilePath.push(res.event.success)\r\n\t\t\t\t\t\tif (this.tempFilePath.length > 8) {\r\n\t\t\t\t\t\t\tthis.tempFilePath.shift()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.toDataURL = this.tempFilePath.join('')\r\n\t\t\t\t\t\tthis.tempFilePath = []\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$emit('fail', 'canvas no data')\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\tundo() {\r\n\t\t\t\t// #ifdef APP-VUE || APP-NVUE\r\n\t\t\t\tthis.rundo += 1\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\tthis.$refs.webview.evalJS(`undo()`)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef APP-VUE\r\n\t\t\t\tif(this.signature)\r\n\t\t\t\t\tthis.signature.undo()\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tclear() {\r\n\t\t\t\t// #ifdef APP-VUE || APP-NVUE\r\n\t\t\t\tthis.rclear += 1\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\tthis.$refs.webview.evalJS(`clear()`)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef APP-VUE\r\n\t\t\t\tif(this.signature)\r\n\t\t\t\t\tthis.signature.clear()\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tisEmpty() {\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\tthis.$refs.webview.evalJS(`isEmpty()`)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-VUE || APP-NVUE\r\n\t\t\t\tthis.rempty += 1\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef APP-VUE || APP-NVUE\r\n\t\t\t\treturn this.signature.isEmpty()\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tcanvasToTempFilePath(param) {\r\n\t\t\t\tconst isEmpty = this.isEmpty()\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\tthis.$refs.webview.evalJS(`save()`)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-VUE || APP-NVUE\r\n\t\t\t\tconst stopURLWatch = this.$watch('toDataURL', (v, n) => {\r\n\t\t\t\t\tif(v && v !== n) {\r\n\t\t\t\t\t\t// if(param.pathType == 'url') {\r\n\t\t\t\t\t\tbase64ToPath(v).then(res => {\r\n\t\t\t\t\t\t\tparam.success({tempFilePath: res,isEmpty: this.risEmpty })\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t// \tparam.success({tempFilePath: v,isEmpty: this.risEmpty })\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\tthis.toDataURL = ''\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstopURLWatch && stopURLWatch()\r\n\t\t\t\t})\r\n\t\t\t\tthis.rsave += 1\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef APP-VUE || APP-NVUE\r\n\t\t\t\tconst success = (success) => param.success && param.success(success)\r\n\t\t\t\tconst fail = (fail) => param.fail && param.fail(err)\r\n\t\t\t\tconst {canvas} = this.signature.canvas.get('el')\r\n\t\t\t\tconst {backgroundColor, landscape} =  this\r\n\t\t\t\tconst width = this.signature.canvas.get('width')\r\n\t\t\t\tconst height = this.signature.canvas.get('height')\r\n\t\t\t\t\r\n\t\t\t\tconst canvasToTempFilePath = (image) => {\r\n\t\t\t\t\tconst context = uni.createCanvasContext('offscreen', this)\r\n\t\t\t\t\tcontext.save()\r\n\t\t\t\t\tcontext.setTransform(1,0,0,1,0,0)\r\n\t\t\t\t\tif(landscape) {\r\n\t\t\t\t\t\tcontext.translate(0, width)\r\n\t\t\t\t\t\tcontext.rotate(-Math.PI / 2)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(backgroundColor) {\r\n\t\t\t\t\t\tcontext.fillStyle = backgroundColor\r\n\t\t\t\t\t\tcontext.fillRect(0,0, width, height)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontext.drawImage(image, 0, 0, width, height);\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontext.draw(false, () => {\r\n\t\t\t\t\t\ttoDataURL('offscreen', this, param).then((res) => {\r\n\t\t\t\t\t\t\tconst size = Math.max(width, height)\r\n\t\t\t\t\t\t\tcontext.restore()\r\n\t\t\t\t\t\t\tcontext.clearRect(0,0, size, size)\r\n\t\t\t\t\t\t\tsuccess({tempFilePath: res, isEmpty})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(this.useCanvas2d) {\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\t// #ifndef MP-ALIPAY\r\n\t\t\t\t\t\tbase64ToPath(canvas.toDataURL()).then(canvasToTempFilePath)\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifdef MP-ALIPAY\r\n\t\t\t\t\t\tcanvas.toTempFilePath({\r\n\t\t\t\t\t\t\tcanvasid: this.canvasid,\r\n\t\t\t\t\t\t\tsuccess(res){\r\n\t\t\t\t\t\t\t\tcanvasToTempFilePath(res.tempFilePath)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t} catch(err){fail(err)}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttoDataURL(this.canvasId, this).then(canvasToTempFilePath).catch(fail)\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t// #ifndef APP-PLUS\r\n\t\t\tgetContext() {\r\n\t\t\t\treturn getRect(`#${this.canvasId}`, {context: this, type: this.useCanvas2d ? 'fields': 'boundingClientRect'}).then(res => {\r\n\t\t\t\t\tif(res) {\r\n\t\t\t\t\t\tlet {width, height, node: canvas, left, top, right} = res\r\n\t\t\t\t\t\tlet {pixelRatio} = uni.getSystemInfoSync()\r\n\t\t\t\t\t\tlet context;\r\n\t\t\t\t\t\tif(canvas) {\r\n\t\t\t\t\t\t\tcontext = canvas.getContext('2d')\r\n\t\t\t\t\t\t\tcanvas.width = width * pixelRatio;\r\n\t\t\t\t\t\t\tcanvas.height = height * pixelRatio;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tpixelRatio = 1\r\n\t\t\t\t\t\t\tcontext = uniContext(uni.createCanvasContext(this.canvasId, this))\r\n\t\t\t\t\t\t\tcanvas = {\r\n\t\t\t\t\t\t\t\tcreateImage, \r\n\t\t\t\t\t\t\t\ttoDataURL: () => toDataURL(this.canvasId, this), \r\n\t\t\t\t\t\t\t\trequestAnimationFrame\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 支付宝小程序 使用stroke有个默认背景色\r\n\t\t\t\t\t\tcontext.clearRect(0,0,width,height)\r\n\t\t\t\t\t\treturn { left, top, right, width, height, context, canvas, pixelRatio};\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttouchStart(e) {\r\n\t\t\t\tif(!this.canvasEl) return\r\n\t\t\t\tthis.isStart = true\r\n\t\t\t\tthis.canvasEl.dispatchEvent('touchstart', wrapEvent(e))\r\n\t\t\t},\r\n\t\t\ttouchMove(e) {\r\n\t\t\t\tif(!this.canvasEl || !this.isStart && this.canvasEl) return\r\n\t\t\t\tthis.canvasEl.dispatchEvent('touchmove', wrapEvent(e))\r\n\t\t\t},\r\n\t\t\ttouchEnd(e) {\r\n\t\t\t\tif(!this.canvasEl) return\r\n\t\t\t\tthis.isStart = false\r\n\t\t\t\tthis.canvasEl.dispatchEvent('touchend', wrapEvent(e))\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t}\r\n\t}\r\n</script>\r\n<style lang=\"scss\">\r\n\t.lime-signature,.lime-signature__canvas {\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\t/* #endif */\r\n\t\t/* #ifdef APP-NVUE */\r\n\t\tflex: 1;\r\n\t\t/* #endif */\r\n\t}\r\n\t\t\r\n\t.offscreen {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 1500rpx;\r\n\t}\r\n</style>","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./l-signature.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./l-signature.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1686291505326\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}