require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["bundle_c/pages/location_update/location_update"],{918:function(n,e,o){"use strict";(function(n,e){var t=o(4);o(29);t(o(25));var c=t(o(919));n.__webpack_require_UNI_MP_PLUGIN__=o,e(c.default)}).call(this,o(1)["default"],o(2)["createPage"])},919:function(n,e,o){"use strict";o.r(e);var t=o(920),c=o(922);for(var i in c)["default"].indexOf(i)<0&&function(n){o.d(e,n,(function(){return c[n]}))}(i);var a,r=o(57),u=Object(r["default"])(c["default"],t["render"],t["staticRenderFns"],!1,null,null,null,!1,t["components"],a);u.options.__file="bundle_c/pages/location_update/location_update.vue",e["default"]=u.exports},920:function(n,e,o){"use strict";o.r(e);var t=o(921);o.d(e,"render",(function(){return t["render"]})),o.d(e,"staticRenderFns",(function(){return t["staticRenderFns"]})),o.d(e,"recyclableRender",(function(){return t["recyclableRender"]})),o.d(e,"components",(function(){return t["components"]}))},921:function(n,e,o){"use strict";var t;o.r(e),o.d(e,"render",(function(){return c})),o.d(e,"staticRenderFns",(function(){return a})),o.d(e,"recyclableRender",(function(){return i})),o.d(e,"components",(function(){return t}));try{t={uNavbar:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-navbar/u-navbar")]).then(o.bind(null,1143))}}}catch(r){if(-1===r.message.indexOf("Cannot find module")||-1===r.message.indexOf(".vue"))throw r;console.error(r.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var c=function(){var n=this,e=n.$createElement;n._self._c},i=!1,a=[];c._withStripped=!0},922:function(n,e,o){"use strict";o.r(e);var t=o(923),c=o.n(t);for(var i in t)["default"].indexOf(i)<0&&function(n){o.d(e,n,(function(){return t[n]}))}(i);e["default"]=c.a},923:function(n,e,o){"use strict";(function(n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=function(){o.e("bundle_c/components/privacy-popup/privacy-popup").then(function(){return resolve(o(1391))}.bind(null,o)).catch(o.oe)},i={components:{PrivacyPopup:c},data:function(){return{showPrivacy:!1,lastKnownLocation:{},uploadTimer:null,points:[{latitude:22,longitude:98,speed:6.4352341234},{latitude:22,longitude:98,speed:6.4352341234},{latitude:22,longitude:98,speed:6.4352341234}]}},onLoad:function(){var e=this;n.getPrivacySetting({success:function(n){console.log(n),n.needAuthorization?e.$refs.privacyPopup.$refs.popup.open():e.clickOpenLocationUpdate()},fail:function(){},complete:function(){}})},methods:{handleAgreePrivacyAuthorization:function(){},confirmPrivacy:function(){this.showPrivacy=!1,getApp().globalData.showPrivacy=!0,this.clickOpenLocationUpdate()},getPrivacyFun:function(){getApp().globalData.showPrivacy?this.$refs.privacyPopup.$refs.popup.open():this.clickOpenLocationUpdate()},stopLocationFun:function(){},clickOpenLocationUpdate:function(){t.authorize({scope:"scope.userLocationBackground",success:function(e){console.log("用户授权定位res1",e),n.startLocationUpdateBackground({success:function(e){console.log("成功开启后台定位res2",e),n.onLocationChange(function(n){var e=this,o=n.latitude,t=n.longitude;this.lastKnownLocation={latitude:o,longitude:t},this.uploadTimer||(this.uploadTimer=setInterval((function(){e.uploadLocation(e.lastKnownLocation)}),18e4))}.bind(this))},fail:function(n){console.error("开启后台定位失败",n)}})},fail:function(n){console.error("获取定位权限失败",n),t.hideLoading(),this.showPrivacy?this.$refs.privacyPopup.$refs.popup.open():t.showModal({title:"提示！",confirmText:"去设置",showCancel:!0,content:"您已拒绝授权小程序获取定位信息，如需重新授权 可在设置中重新授权",success:function(n){n.confirm&&that.gotoSettingFun()}})}})},uploadLocation:function(n){console.log("上床定位信息",n)}}};e.default=i}).call(this,o(1)["default"],o(2)["default"])}},[[918,"common/runtime","common/vendor"]]]);