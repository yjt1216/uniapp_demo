(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/helang-compress/helang-compress"],{1090:function(n,e,t){"use strict";t.r(e);var r=t(1091),a=t(1093);for(var c in a)["default"].indexOf(c)<0&&function(n){t.d(e,n,(function(){return a[n]}))}(c);t(1095);var u,i=t(57),s=Object(i["default"])(a["default"],r["render"],r["staticRenderFns"],!1,null,"5ece160e",null,!1,r["components"],u);s.options.__file="components/helang-compress/helang-compress.vue",e["default"]=s.exports},1091:function(n,e,t){"use strict";t.r(e);var r=t(1092);t.d(e,"render",(function(){return r["render"]})),t.d(e,"staticRenderFns",(function(){return r["staticRenderFns"]})),t.d(e,"recyclableRender",(function(){return r["recyclableRender"]})),t.d(e,"components",(function(){return r["components"]}))},1092:function(n,e,t){"use strict";var r;t.r(e),t.d(e,"render",(function(){return a})),t.d(e,"staticRenderFns",(function(){return u})),t.d(e,"recyclableRender",(function(){return c})),t.d(e,"components",(function(){return r}));var a=function(){var n=this,e=n.$createElement;n._self._c},c=!1,u=[];a._withStripped=!0},1093:function(n,e,t){"use strict";t.r(e);var r=t(1094),a=t.n(r);for(var c in r)["default"].indexOf(c)<0&&function(n){t.d(e,n,(function(){return r[n]}))}(c);e["default"]=a.a},1094:function(n,e,t){"use strict";(function(n){var r=t(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(t(26)),c=r(t(28)),u={data:function(){return{pic:"",canvasSize:{width:0,height:0},canvasId:""}},mounted:function(){n&&n._helang_compress_canvas?n._helang_compress_canvas++:n._helang_compress_canvas=1,this.canvasId="compress-canvas".concat(n._helang_compress_canvas)},methods:{compressFun:function(e){var t=this;return new Promise(function(){var r=(0,c.default)(a.default.mark((function r(c,u){var i,s,o,f,l;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.getImageInfo(e.src).then((function(n){return n})).catch((function(){return null}));case 2:if(i=r.sent,i){r.next=6;break}return u("获取图片信息异常"),r.abrupt("return");case 6:if(s=e.maxSize||1080,o=e.minSize||640,f=i.width,l=i.height,!(f<=o&&l<=o)){r.next=12;break}return c(e.src),r.abrupt("return");case 12:(f>s||l>s)&&(f>l?(l=Math.floor(l/(f/s)),f=s):(f=Math.floor(f/(l/s)),l=s)),t.$set(t,"canvasSize",{width:"".concat(f,"px"),height:"".concat(l,"px")}),setTimeout((function(){var r=n.createCanvasContext(t.canvasId,t);r.clearRect(0,0,f,l),r.drawImage(i.path,0,0,f,l),r.draw(!1,(function(){n.canvasToTempFilePath({x:0,y:0,width:f,height:l,destWidth:f,destHeight:l,canvasId:t.canvasId,fileType:e.fileType||"png",quality:e.quality||.9,success:function(n){c(n.tempFilePath)},fail:function(n){u(null)}},t)}))}),300);case 15:case"end":return r.stop()}}),r)})));return function(n,e){return r.apply(this,arguments)}}())},getImageInfo:function(e){return new Promise((function(t,r){n.getImageInfo({src:e,success:function(n){t(n)},fail:function(){r(null)}})}))},compress:function(n){var e=this,t=0,r=0,u=0,i=[],s=[];s="string"==typeof n.src?[n.src]:n.src;var o=function(){return new Promise((function(e,o){var l=function(){var o=(0,c.default)(a.default.mark((function c(){var o;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f().catch((function(){return null}));case 2:o=a.sent,o?(r++,i.push(o)):u++,n.progress&&n.progress({done:r,fail:u,count:s.length}),t++,t>=s.length?e(!0):l();case 7:case"end":return a.stop()}}),c)})));return function(){return o.apply(this,arguments)}}();l()}))},f=function(){return e.compressFun({src:s[t],maxSize:n.maxSize,fileType:n.fileType,quality:n.quality,minSize:n.minSize})};return new Promise(function(){var e=(0,c.default)(a.default.mark((function e(t,r){var c;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:c=e.sent,c?"string"==typeof n.src?t(i[0]):t(i):r(null);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}}};e.default=u}).call(this,t(2)["default"])},1095:function(n,e,t){"use strict";t.r(e);var r=t(1096),a=t.n(r);for(var c in r)["default"].indexOf(c)<0&&function(n){t.d(e,n,(function(){return r[n]}))}(c);e["default"]=a.a},1096:function(n,e,t){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/helang-compress/helang-compress-create-component',
    {
        'components/helang-compress/helang-compress-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(1090))
        })
    },
    [['components/helang-compress/helang-compress-create-component']]
]);
